define(["@grafana/data","react","@grafana/ui","lodash","@emotion/css","d3","react-dom","@grafana/runtime"],((e,t,o,n,r,a,i,l)=>(()=>{"use strict";var s={644:e=>{e.exports=r},305:t=>{t.exports=e},545:e=>{e.exports=l},388:e=>{e.exports=o},200:e=>{e.exports=a},980:e=>{e.exports=n},650:e=>{e.exports=t},729:e=>{e.exports=i}},c={};function u(e){var t=c[e];if(void 0!==t)return t.exports;var o=c[e]={exports:{}};return s[e](o,o.exports,u),o.exports}u.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return u.d(t,{a:t}),t},u.d=(e,t)=>{for(var o in t)u.o(t,o)&&!u.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},u.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),u.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var d={};return(()=>{u.r(d),u.d(d,{plugin:()=>Tn});var e,t=u(305);!function(e){e.HEXAGON_POINTED_TOP="hexagon_pointed_top",e.CIRCLE="circle",e.SQUARE="square"}(e||(e={}));const o=[{value:"hexagon_pointed_top",label:"Hexagon Pointed Top"},{value:"circle",label:"Circle"},{value:"square",label:"Square"}],n=[{value:"mean",label:"Mean (avg)"},{value:"sum",label:"Sum"},{value:"min",label:"Min"},{value:"max",label:"Max"},{value:"last",label:"Last"},{value:"lastNotNull",label:"Last Not Null"},{value:"first",label:"First"},{value:"firstNotNull",label:"First Not Null"},{value:"count",label:"Count"},{value:"allIsNull",label:"All Is Null (boolean)"},{value:"allIsZero",label:"All Is Zero (boolean)"},{value:"delta",label:"Delta"},{value:"diff",label:"Difference"},{value:"diffperc",label:"Difference (Percent)"},{value:"last_time",label:"Time of Last Point"},{value:"logmin",label:"Log Min"},{value:"name",label:"Name"},{value:"nonNullCount",label:"Non Null Count"},{value:"previousDeltaUp",label:"Previous Delta Up"},{value:"range",label:"Range"},{value:"step",label:"Step"}],r=[{value:0,label:"Disabled"},{value:1,label:"Alphabetical (asc)"},{value:2,label:"Alphabetical (desc)"},{value:3,label:"Numerical (asc)"},{value:4,label:"Numerical (desc)"},{value:5,label:"Alphabetical (case-insensitive, asc)"},{value:6,label:"Alphabetical (case-insensitive, desc)"}],a=[{value:"name",label:"Name"},{value:"thresholdLevel",label:"Threshold Level"},{value:"value",label:"Value"}],i=[{value:"all",label:"Show All"},{value:"triggered",label:"Show Triggered"}];var l,s=u(650),c=u.n(s),p=u(388),f=u(980),m=new Uint8Array(16);function h(){if(!l&&!(l="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return l(m)}const g=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,b=function(e){return"string"==typeof e&&g.test(e)};for(var y=[],v=0;v<256;++v)y.push((v+256).toString(16).substr(1));const w=function(e,t,o){var n=(e=e||{}).random||(e.rng||h)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){o=o||0;for(var r=0;r<16;++r)t[o+r]=n[r];return t}return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=(y[e[t+0]]+y[e[t+1]]+y[e[t+2]]+y[e[t+3]]+"-"+y[e[t+4]]+y[e[t+5]]+"-"+y[e[t+6]]+y[e[t+7]]+"-"+y[e[t+8]]+y[e[t+9]]+"-"+y[e[t+10]]+y[e[t+11]]+y[e[t+12]]+y[e[t+13]]+y[e[t+14]]+y[e[t+15]]).toLowerCase();if(!b(o))throw TypeError("Stringified UUID is invalid");return o}(n)};var x=u(644);const T=[{value:0,label:"ok"},{value:1,label:"warning"},{value:2,label:"critical"},{value:3,label:"custom"}],S=e=>{const t=(0,p.useStyles2)(C),[o,n]=(0,s.useState)((e=>{const t=T.keys();for(const o of t)if(T[o].value===e)return T[o];return T[0]})(e.threshold.state));return c().createElement(p.Input,{disabled:e.disabled,type:"number",step:"1.0",key:e.ID,onChange:t=>e.valueSetter(e.index,Number(t.currentTarget.value)),value:e.threshold.value,prefix:c().createElement("div",{className:t.inputPrefix},c().createElement("div",{className:t.colorPicker},c().createElement(p.ColorPicker,{color:e.threshold.color,onChange:t=>e.colorSetter(e.index,t),enableNamedColors:!0}))),suffix:c().createElement(c().Fragment,null,c().createElement(p.Select,{disabled:e.disabled,menuShouldPortal:!0,value:o,onChange:t=>{n(t),e.stateSetter(e.index,t.value)},options:T}),c().createElement(p.IconButton,{disabled:e.disabled,key:"deleteThreshold",variant:"destructive",name:"trash-alt",tooltip:"Delete Threshold",onClick:()=>e.remover(e.index)}))})},C=e=>({inputPrefix:x.css`
      display: flex;
      align-items: center;
    `,colorPicker:x.css`
      padding: 0 ${e.spacing(1)};
    `});class E{asHex(){return"#"+((1<<24)+(this.r<<16)+(this.g<<8)+this.b).toString(16).slice(1)}asRGB(){return"rgb("+this.r+","+this.g+","+this.b+")"}blendWith(e,t){const o=Math.round(e.r*(1-t)+this.r*t),n=Math.round(e.g*(1-t)+this.g*t),r=Math.round(e.b*(1-t)+this.b*t);return new E(o,n,r)}Mul(e,t){const o=Math.round(e.r/255*this.r*t),n=Math.round(e.g/255*this.g*t),r=Math.round(e.b/255*this.b*t);return new E(o,n,r)}RGBToHex(e){let t=e.indexOf(",")>-1?",":" ";e=e.substr(4).split(")")[0].split(t);for(let t in e){let o=e[t];o.indexOf("%")>-1&&(e[t]=Math.round(o.substr(0,o.length-1)/100*255))}}static RGBAToHex(e){const t=e.replace(/\s/g,"").match(/^rgba?\((\d+),(\d+),(\d+),?([^,\s)]+)?/i),o=(t&&t[4]||"").trim();return"#"+(t?(256|parseInt(t[1],10)).toString(16).slice(1)+(256|parseInt(t[2],10)).toString(16).slice(1)+(256|parseInt(t[3],10)).toString(16).slice(1):e)+(""!==o?(255*parseFloat(o)|256).toString(16).slice(1):1)}fromHex(e){e=e.substring(1,7);const t=parseInt(e,16);this.r=t>>16&255,this.g=t>>8&255,this.b=255&t}constructor(e,t,o){this.r=e,this.g=t,this.b=o}}const O="rgba(10, 85, 161, 1)",N=(new E(10,85,161),"#299c46"),D=new E(41,156,70),k="#ed8128",F=new E(237,129,40),P="#f53636",R=new E(245,54,54),A=(new E(64,64,160),e=>{const[o,n]=(0,s.useState)((()=>{if(!e.thresholds)return[];const t=[];return e.thresholds.forEach(((e,o)=>{t[o]={threshold:e,order:o,ID:w()}})),t})),r=(0,p.useTheme2)(),a=(0,p.useTheme)(),i=t=>{n(t);const o=[];t.forEach((e=>{o.push(e.threshold)})),e.setter(o)},l=(e,t)=>{o[e].threshold.value=Number(t);const n=[...o],r=(0,f.orderBy)(n,["threshold.value"],["asc"]);i([...r])},u=(e,n)=>{let l=n;l=void 0!==r.visualization?r.visualization.getColorByName(n):(0,t.getColorForTheme)(n,a),o[e].threshold.color=l,i([...o])},d=(e,t)=>{o[e].threshold.state=t,t<3&&(o[e].threshold.color=m(t)),i([...o])},m=e=>{switch(e){case 0:default:return N;case 1:return k;case 2:return P}},h=e=>{const t=[...o];let n=0;for(let o=0;o<t.length;o++)if(t[o].order===e){n=o;break}t.splice(n,1);for(let e=0;e<t.length;e++)t[e].order=e;i([...t])};return c().createElement(c().Fragment,null,c().createElement(p.Button,{disabled:e.disabled,fill:"solid",variant:"primary",icon:"plus",onClick:()=>{const e=o.length,t={threshold:{color:N,state:0,value:0},order:e,ID:w()};i([...o,t])}},"Add Threshold"),o&&o.map(((t,o)=>c().createElement(S,{disabled:e.disabled||!1,key:`threshold-item-index-${t.ID}`,ID:t.ID,threshold:t.threshold,valueSetter:l,colorSetter:u,stateSetter:d,remover:h,index:o}))))});function M(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function z(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},n=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(o).filter((function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable})))),n.forEach((function(t){M(e,t,o[t])}))}return e}function L(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);o.push.apply(o,n)}return o}(Object(t)).forEach((function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(t,o))})),e}const V=e=>{const[o,r]=(0,s.useState)([]),[a,i]=(0,s.useState)(e.override),l=t=>{i(t),e.setter(a.order,t)},[u]=(0,s.useState)("eye"),[d]=(0,s.useState)("eye-slash"),[f,m]=(0,s.useState)((e=>{const t=n.keys();for(const o of t)if(n[o].value===e)return n[o];return n[5]})(e.override.operatorName));return(0,s.useEffect)((()=>{if(e.context.data){const o=e.context.data;let n=[];for(let e=0;e<o.length;e++)for(const r of o[e].fields)r.type===t.FieldType.number&&n.push({label:r.name,value:r.name});r(n)}}),[e.context.data]),c().createElement(p.Card,{heading:"",key:`override-card-${e.ID}`},c().createElement(p.Card.Meta,null,c().createElement(p.FieldSet,null,c().createElement(p.Field,{label:"Label",description:"Sets the name of the override in the configuration editor.",disabled:!a.enabled},c().createElement(p.Input,{value:a.label,placeholder:"",onChange:e=>l(L(z({},a),{label:e.currentTarget.value}))})),c().createElement(p.Field,{label:"Metric/RegEx",disabled:!a.enabled},c().createElement(p.Cascader,{initialValue:a.metricName,allowCustomValue:!0,placeholder:"",options:o,onSelect:e=>l(L(z({},a),{metricName:e}))})),c().createElement(p.Field,{label:"Alias",disabled:!a.enabled,hidden:!0},c().createElement(p.Input,{value:a.alias,placeholder:"",onChange:e=>l(L(z({},a),{alias:e.currentTarget.value}))})),c().createElement(p.Field,{label:"Decimals",disabled:!a.enabled},c().createElement(p.Input,{value:a.decimals,type:"number",step:1,placeholder:"",onChange:e=>l(L(z({},a),{decimals:e.currentTarget.value}))})),c().createElement(p.Field,{label:"Stat",description:"The statistic to be displayed",disabled:!a.enabled},c().createElement(p.Select,{menuShouldPortal:!0,value:f,onChange:e=>{m(e),l(L(z({},a),{operatorName:e.value}))},options:n})),c().createElement(p.Field,{label:"Unit Format",disabled:!a.enabled},a.enabled?c().createElement(p.UnitPicker,{value:a.unitFormat,onChange:e=>l(L(z({},a),{unitFormat:e}))}):c().createElement("span",null,a.unitFormat)),c().createElement(p.Field,{label:"Thresholds",disabled:!a.enabled},c().createElement(A,{disabled:!a.enabled,thresholds:a.thresholds,setter:e=>{l(L(z({},a),{thresholds:e}))}})),c().createElement(p.Field,{label:"Prefix",description:"Apply text to beginning of metric",disabled:!a.enabled},c().createElement(p.Input,{value:a.prefix,placeholder:"",onChange:e=>l(L(z({},a),{prefix:e.currentTarget.value}))})),c().createElement(p.Field,{label:"Suffix",description:"Apply text to end of metric",disabled:!a.enabled},c().createElement(p.Input,{value:a.suffix,placeholder:"",onChange:e=>l(L(z({},a),{suffix:e.currentTarget.value}))})),c().createElement(p.Field,{label:"Clickthrough URL",description:"URL to Open on Click",disabled:!a.enabled},c().createElement(p.Input,{value:a.clickThrough,placeholder:"https://",onChange:e=>l(L(z({},a),{clickThrough:e.currentTarget.value}))})),c().createElement(p.Field,{label:"Sanitize URL",description:"Sanitize URL before evaluating",disabled:!a.enabled},c().createElement(p.Switch,{transparent:!1,disabled:!a.enabled,value:a.clickThroughSanitize,onChange:()=>l(L(z({},a),{clickThroughSanitize:!a.clickThroughSanitize}))})),c().createElement(p.Field,{label:"Open in New Tab",description:"Open link in new tab",disabled:!a.enabled},c().createElement(p.Switch,{transparent:!1,value:a.clickThroughOpenNewTab,disabled:!a.enabled,onChange:()=>l(L(z({},a),{clickThroughOpenNewTab:!a.clickThroughOpenNewTab}))})))),c().createElement(p.Card.Actions,null,c().createElement(p.IconButton,{key:"moveUp",name:"arrow-up",tooltip:"Move Up",onClick:()=>{e.moveUp(a.order)}}),c().createElement(p.IconButton,{key:"moveDown",name:"arrow-down",tooltip:"Move Down",onClick:()=>{e.moveDown(a.order)}}),c().createElement(p.IconButton,{key:"overrideEnabled",name:a.enabled?u:d,tooltip:"Hide/Show Override",onClick:()=>l(L(z({},a),{enabled:!a.enabled}))}),c().createElement(p.IconButton,{key:"copyOverride",name:"copy",tooltip:"Duplicate",onClick:()=>{e.createDuplicate(a.order)}}),c().createElement(p.IconButton,{key:"deleteOverride",variant:"destructive",name:"trash-alt",tooltip:"Delete Override",onClick:()=>{e.remover(a.order)}})))},j=({item:e,context:t,onChange:o})=>{const[r]=(0,s.useState)(t.options.overrideConfig),[a,i]=(0,s.useState)((()=>{if(!r.overrides)return[];const e=[];return r.overrides.forEach(((t,o)=>{e[o]={override:t,order:o,ID:w()}})),e})),l=e=>{i(e);const t=[];e.forEach((e=>{t.push(e.override)}));const n={overrides:t,enabled:r.enabled};o(n)},[u,d]=(0,s.useState)((()=>{if(!a)return[];let e=a.length;const t=[];for(;e--;)t[e]=!1;return t})),f=(e,t)=>{a[e].override=t,l([...a])},m=e=>{const t=a[e].override,o=a.length,n={override:{label:`${t.label} Copy`,enabled:t.enabled,metricName:t.metricName,alias:t.alias,thresholds:t.thresholds,prefix:t.prefix,suffix:t.suffix,clickThrough:t.clickThrough,clickThroughOpenNewTab:t.clickThroughOpenNewTab,clickThroughSanitize:t.clickThroughSanitize,unitFormat:t.unitFormat,scaledDecimals:t.scaledDecimals,decimals:t.decimals,colors:t.colors,operatorName:t.operatorName,order:o},order:o,ID:w()};l([...a,n]),d([...u,!0])},h=(e,t,o)=>{if(o>=e.length)for(var n=o-e.length+1;n--;)e.push(void 0);e.splice(o,0,e.splice(t,1)[0])},g=e=>{if(e!==a.length-1){h(a,e,e+1);for(let e=0;e<a.length;e++)a[e].order=e,a[e].override.order=e;l([...a])}},b=e=>{if(e>0){h(a,e,e-1);for(let e=0;e<a.length;e++)a[e].order=e,a[e].override.order=e;l([...a])}},y=e=>{const t=[...a];let o=0;for(let n=0;n<t.length;n++)if(t[n].order===e){o=n;break}t.splice(o,1);for(let e=0;e<t.length;e++)t[e].order=e,t[e].override.order=e;l([...t])};return c().createElement(c().Fragment,null,c().createElement(p.Button,{fill:"solid",variant:"primary",icon:"plus",onClick:()=>{const e=a.length,t={override:{label:`Override-${e}`,enabled:!0,metricName:"",alias:"",thresholds:[],prefix:"",suffix:"",clickThrough:"",clickThroughOpenNewTab:!0,clickThroughSanitize:!0,unitFormat:"short",scaledDecimals:null,decimals:"2",colors:[N,k,P,"#0a55a1"],operatorName:n[0].value,order:e},order:e,ID:w()};l([...a,t]),d([...u,!0])}},"Add Override"),a&&a.map(((e,o)=>c().createElement(p.Collapse,{key:`collapse-item-index-${e.ID}`,label:e.override.label,isOpen:u[o],onToggle:()=>(e=>{const t=[...u];t[e]=!t[e],d([...t])})(o),collapsible:!0},c().createElement(V,{key:`override-item-index-${e.ID}`,ID:e.ID,override:e.override,enabled:e.override.enabled,setter:f,remover:y,moveDown:g,moveUp:b,createDuplicate:m,context:t})))))};var I=Math.PI/3,B=[0,I,2*I,3*I,4*I,5*I];function U(e){return e[0]}function _(e){return e[1]}var H=u(200);const $=e=>{const t=new E(255,255,255),o=(e=>{const t=[],o=new E(255,255,255);for(let n=0;n<e.length;n++){const r=new E(0,0,0);let a=e[n].color;a.startsWith("rgba")&&(a=E.RGBAToHex(a)),r.fromHex(a);const i=r.Mul(o,.7);t.push({start:r.asHex(),end:i.asHex()})}return t})(e.data),n=D,r=n.Mul(t,.7),a=F,i=a.Mul(t,.7),l=R,s=l.Mul(t,.7),u=e.gradientId;return c().createElement(c().Fragment,null,c().createElement("defs",null,o.map(((e,t)=>c().createElement("linearGradient",{key:t,id:u+"_linear_gradient_state_data_"+t,x1:"30%",y1:"30%",x2:"70%",y2:"70%"},c().createElement("stop",{offset:"0%",stopColor:e.start}),c().createElement("stop",{offset:"100%",stopColor:e.end})))),c().createElement("linearGradient",{id:u+"_linear_gradient_state_ok",x1:"30%",y1:"30%",x2:"70%",y2:"70%"},c().createElement("stop",{offset:"0%",stopColor:n.asHex()}),c().createElement("stop",{offset:"100%",stopColor:r.asHex()})),c().createElement("linearGradient",{id:u+"_linear_gradient_state_warning",x1:"30%",y1:"30%",x2:"70%",y2:"70%"},c().createElement("stop",{offset:"0%",stopColor:a.asHex()}),c().createElement("stop",{offset:"100%",stopColor:i.asHex()})),c().createElement("linearGradient",{id:u+"_linear_gradient-state_critical",x1:"30%",y1:"30%",x2:"70%",y2:"70%"},c().createElement("stop",{offset:"0%",stopColor:l.asHex()}),c().createElement("stop",{offset:"100%",stopColor:s.asHex()})),c().createElement("linearGradient",{id:u+"_linear_gradient_state_unknown",x1:"30%",y1:"30%",x2:"70%",y2:"70%"},c().createElement("stop",{offset:"0%",stopColor:"#73808A"}),c().createElement("stop",{offset:"100%",stopColor:"#73808A"}))))};class G{setRadius(e){this.radius=e}setHeight(e){this.height=e}setWidth(e){this.width=e}generateHexagonPointedTopLayout(){return this.radius=this.getHexFlatTopRadius(),{}}generateUniformLayout(){return this.radius=this.getUniformRadius(),{}}getHexFlatTopRadius(){let e=H.min([this.width/((this.numColumns+.5)*this.SQRT3),this.height/(1.5*(this.numRows+1/3))]);return void 0!==e?(e-=0,this.truncateFloat(e)):40}getHexFlatTopDiameters(){const e=this.getHexFlatTopRadius();return{diameterX:this.truncateFloat(e*this.SQRT3),diameterY:this.truncateFloat(2*e)}}getUniformDiameters(){const e=this.getUniformRadius();return{diameterX:2*e,diameterY:2*e}}getUniformRadius(){const e=this.width/this.maxColumnsUsed*.5,t=this.height/this.maxRowsUsed*.5;let o=e;return o>t&&(o=t),o-=0,this.truncateFloat(o)}generatePossibleColumnAndRowsSizes(e,t,o){if(t&&e){const e=Math.sqrt(o);this.width>this.height?(this.numColumns=Math.ceil(this.width/this.height*e*.75),this.numColumns<1?this.numColumns=1:this.numColumns>o&&(this.numColumns=o),this.numRows=Math.ceil(o/this.numColumns),this.numRows<1&&(this.numRows=1)):(this.numRows=Math.ceil(this.height/this.width*e*.75),this.numRows<1?this.numRows=1:this.numRows>o&&(this.numRows=o),this.numColumns=Math.ceil(o/this.numRows),this.numColumns<1&&(this.numColumns=1))}else t?(this.numRows=Math.ceil(o/this.numColumns),this.numRows<1&&(this.numRows=1)):e&&(this.numColumns=Math.ceil(o/this.numRows),this.numColumns<1&&(this.numColumns=1))}generateActualColumnAndRowUsage(e,t){let o=0,n=0,r=0,a=0;for(let i=0;i<this.numRows;i++)if((!t||o<t)&&o<e.length){n+=1,r=0;for(let n=0;n<this.numColumns;n++)(!t||o<t)&&o<e.length&&(r+=1,r>a&&(a=r),o++)}this.maxRowsUsed=n,this.maxColumnsUsed=a}shapeToCoordinates(t,o,n,r){switch(t){case e.HEXAGON_POINTED_TOP:let t=o*n*this.SQRT3;return r%2==1&&(t+=o*this.SQRT3/2),[t,o*r*1.5];case e.CIRCLE:case e.SQUARE:return[o*n*2,o*r*2];default:return[o*n*1.75,o*r*1.5]}}generatePoints(e,t,o){const n=[];if(void 0===e)return n;let r=0,a=0,i=0;if(this.numRows===1/0)return n;if(isNaN(this.numColumns))return n;for(let l=0;l<this.numRows;l++)if((!t||n.length<t)&&n.length<e.length){r+=1,a=0;for(let r=0;r<this.numColumns;r++)(!t||n.length<t)&&n.length<e.length&&(a+=1,a>i&&(i=a),n.push(this.shapeToCoordinates(o,this.radius,r,l)))}return this.maxRowsUsed=r,this.maxColumnsUsed=i,n}generateUniformPoints(e,t){const o=[];if(void 0===e)return o;let n=0,r=0,a=0,i=1,l=1;if(this.numRows===1/0)return o;if(isNaN(this.numColumns))return o;for(let s=0;s<this.numRows;s++)if((!t||o.length<t)&&o.length<e.length){n+=1,r=0;for(let n=0;n<this.numColumns;n++)(!t||o.length<t)&&o.length<e.length&&(r+=1,r>a&&(a=r),o.push({x:i,y:l,width:2*this.radius,height:2*this.radius}),i+=2*this.radius);i=1,l+=2*this.radius}return this.maxRowsUsed=n,this.maxColumnsUsed=a,o}getRadius(){return this.radius}generateRadius(t){if(!this.autoSize)return this.radius;let o=0;switch(t){case e.HEXAGON_POINTED_TOP:o=this.getHexFlatTopRadius();break;case e.CIRCLE:case e.SQUARE:o=this.getUniformRadius();break;default:o=this.getHexFlatTopRadius()}return this.radius=o,o}truncateFloat(e){if(e===1/0||isNaN(e))return 0;const t=e.toString().match(/^-?\d+(?:\.\d{0,2})?/);return null!==t&&t.length>0?Number(t[0]):0}getOffsets(t,o){switch(t){case e.HEXAGON_POINTED_TOP:return this.getOffsetsHexagonPointedTop(o);case e.SQUARE:return this.getOffsetsSquare(o);case e.CIRCLE:default:return this.getOffsetsUniform(o)}}getOffsetsHexagonPointedTop(e){let t=H.min([this.width/((this.numColumns+.5)*this.SQRT3),this.height/(1.5*(this.numRows+1/3))]);t=this.truncateFloat(t);const o=this.truncateFloat(t*this.SQRT3),n=this.truncateFloat(2*t),r=.5*n,{oddCount:a,evenCount:i}=this.getOddEvenCountForRange(1,this.maxRowsUsed),l=a*n+i*n*.5;let s=(this.height-l)/2;s=-(s+r);const c=.5*o;let u=0;this.numRows>1&&e>=2*this.maxColumnsUsed&&(u=.5);const d=(this.numColumns+u)*o;let p=(this.width-d)/2;return p=-(p+c),{xoffset:p,yoffset:s}}getOffsetsUniform(e){const{diameterX:t,diameterY:o}=this.getDiameters(),n=this.truncateFloat(t),r=this.truncateFloat(o),a=.5*r,i=this.maxRowsUsed*r;let l=(this.height-i)/2;l=-(l+a);const s=.5*n,c=this.numColumns*n;let u=(this.width-c)/2;return u=-(u+s),{xoffset:u,yoffset:l}}getOffsetsSquare(e){const{diameterX:t,diameterY:o}=this.getDiameters(),n=this.truncateFloat(t),r=this.truncateFloat(o),a=this.maxRowsUsed*r;let i=(this.height-a)/2;i=-(i+0);const l=this.numColumns*n;let s=(this.width-l)/2;return s=-(s+0),{xoffset:s,yoffset:i}}getOddEvenCountForRange(e,t){let o=(t-e)/2;return t%2==0&&e%2==0||o++,{oddCount:o,evenCount:t-e+1-o}}getDiameters(){switch(this.shape){case e.HEXAGON_POINTED_TOP:return this.getHexFlatTopDiameters();case e.SQUARE:case e.CIRCLE:default:return this.getUniformDiameters()}}constructor(e,t,o,n,r,a,i){this.SQRT3=1.7320508075688772,this.width=e,this.height=t,o<1||isNaN(o)?this.numColumns=8:this.numColumns=o,n<1||isNaN(n)?this.numRows=8:this.numRows=n,this.maxColumnsUsed=0,this.maxRowsUsed=0,r<1||isNaN(r)?this.displayLimit=100:this.displayLimit=r,this.shape=i,this.radius=0,this.autoSize=a}}function W(e,t){if((0,f.isNumber)(t))return{decimals:t,scaledDecimals:null};const o=e/2;let n=-Math.floor(Math.log(o)/Math.LN10);const r=Math.pow(10,-n),a=o/r;let i;a<1.5?i=1:a<3?(i=2,a>2.25&&(i=2.5,++n)):i=a<7.5?5:10,i*=r,Math.floor(e)===e&&(n=0);const l={decimals:0,scaledDecimals:0};return l.decimals=Math.max(0,n),l.scaledDecimals=l.decimals-Math.floor(Math.log(i)/Math.LN10)+2,l}function X(e,t){const o=document.createElement("canvas").getContext("2d");return o?(o.font=t,o.measureText(e).width):40}function q(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Q(e){return e instanceof q(e).Element||e instanceof Element}function Y(e){return e instanceof q(e).HTMLElement||e instanceof HTMLElement}function J(e){return"undefined"!=typeof ShadowRoot&&(e instanceof q(e).ShadowRoot||e instanceof ShadowRoot)}var K=Math.max,Z=Math.min,ee=Math.round;function te(){var e=navigator.userAgentData;return null!=e&&e.brands?e.brands.map((function(e){return e.brand+"/"+e.version})).join(" "):navigator.userAgent}function oe(){return!/^((?!chrome|android).)*safari/i.test(te())}function ne(e,t,o){void 0===t&&(t=!1),void 0===o&&(o=!1);var n=e.getBoundingClientRect(),r=1,a=1;t&&Y(e)&&(r=e.offsetWidth>0&&ee(n.width)/e.offsetWidth||1,a=e.offsetHeight>0&&ee(n.height)/e.offsetHeight||1);var i=(Q(e)?q(e):window).visualViewport,l=!oe()&&o,s=(n.left+(l&&i?i.offsetLeft:0))/r,c=(n.top+(l&&i?i.offsetTop:0))/a,u=n.width/r,d=n.height/a;return{width:u,height:d,top:c,right:s+u,bottom:c+d,left:s,x:s,y:c}}function re(e){var t=q(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function ae(e){return e?(e.nodeName||"").toLowerCase():null}function ie(e){return((Q(e)?e.ownerDocument:e.document)||window.document).documentElement}function le(e){return ne(ie(e)).left+re(e).scrollLeft}function se(e){return q(e).getComputedStyle(e)}function ce(e){var t=se(e),o=t.overflow,n=t.overflowX,r=t.overflowY;return/auto|scroll|overlay|hidden/.test(o+r+n)}function ue(e,t,o){void 0===o&&(o=!1);var n,r,a=Y(t),i=Y(t)&&function(e){var t=e.getBoundingClientRect(),o=ee(t.width)/e.offsetWidth||1,n=ee(t.height)/e.offsetHeight||1;return 1!==o||1!==n}(t),l=ie(t),s=ne(e,i,o),c={scrollLeft:0,scrollTop:0},u={x:0,y:0};return(a||!a&&!o)&&(("body"!==ae(t)||ce(l))&&(c=(n=t)!==q(n)&&Y(n)?{scrollLeft:(r=n).scrollLeft,scrollTop:r.scrollTop}:re(n)),Y(t)?((u=ne(t,!0)).x+=t.clientLeft,u.y+=t.clientTop):l&&(u.x=le(l))),{x:s.left+c.scrollLeft-u.x,y:s.top+c.scrollTop-u.y,width:s.width,height:s.height}}function de(e){var t=ne(e),o=e.offsetWidth,n=e.offsetHeight;return Math.abs(t.width-o)<=1&&(o=t.width),Math.abs(t.height-n)<=1&&(n=t.height),{x:e.offsetLeft,y:e.offsetTop,width:o,height:n}}function pe(e){return"html"===ae(e)?e:e.assignedSlot||e.parentNode||(J(e)?e.host:null)||ie(e)}function fe(e){return["html","body","#document"].indexOf(ae(e))>=0?e.ownerDocument.body:Y(e)&&ce(e)?e:fe(pe(e))}function me(e,t){var o;void 0===t&&(t=[]);var n=fe(e),r=n===(null==(o=e.ownerDocument)?void 0:o.body),a=q(n),i=r?[a].concat(a.visualViewport||[],ce(n)?n:[]):n,l=t.concat(i);return r?l:l.concat(me(pe(i)))}function he(e){return["table","td","th"].indexOf(ae(e))>=0}function ge(e){return Y(e)&&"fixed"!==se(e).position?e.offsetParent:null}function be(e){for(var t=q(e),o=ge(e);o&&he(o)&&"static"===se(o).position;)o=ge(o);return o&&("html"===ae(o)||"body"===ae(o)&&"static"===se(o).position)?t:o||function(e){var t=/firefox/i.test(te());if(/Trident/i.test(te())&&Y(e)&&"fixed"===se(e).position)return null;var o=pe(e);for(J(o)&&(o=o.host);Y(o)&&["html","body"].indexOf(ae(o))<0;){var n=se(o);if("none"!==n.transform||"none"!==n.perspective||"paint"===n.contain||-1!==["transform","perspective"].indexOf(n.willChange)||t&&"filter"===n.willChange||t&&n.filter&&"none"!==n.filter)return o;o=o.parentNode}return null}(e)||t}var ye="top",ve="bottom",we="right",xe="left",Te="auto",Se=[ye,ve,we,xe],Ce="start",Ee="end",Oe="viewport",Ne="popper",De=Se.reduce((function(e,t){return e.concat([t+"-"+Ce,t+"-"+Ee])}),[]),ke=[].concat(Se,[Te]).reduce((function(e,t){return e.concat([t,t+"-"+Ce,t+"-"+Ee])}),[]),Fe=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function Pe(e){var t=new Map,o=new Set,n=[];function r(e){o.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!o.has(e)){var n=t.get(e);n&&r(n)}})),n.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){o.has(e.name)||r(e)})),n}var Re={placement:"bottom",modifiers:[],strategy:"absolute"};function Ae(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return!t.some((function(e){return!(e&&"function"==typeof e.getBoundingClientRect)}))}function Me(e){void 0===e&&(e={});var t=e,o=t.defaultModifiers,n=void 0===o?[]:o,r=t.defaultOptions,a=void 0===r?Re:r;return function(e,t,o){void 0===o&&(o=a);var r,i,l={placement:"bottom",orderedModifiers:[],options:Object.assign({},Re,a),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},s=[],c=!1,u={state:l,setOptions:function(o){var r="function"==typeof o?o(l.options):o;d(),l.options=Object.assign({},a,l.options,r),l.scrollParents={reference:Q(e)?me(e):e.contextElement?me(e.contextElement):[],popper:me(t)};var i,c,p=function(e){var t=Pe(e);return Fe.reduce((function(e,o){return e.concat(t.filter((function(e){return e.phase===o})))}),[])}((i=[].concat(n,l.options.modifiers),c=i.reduce((function(e,t){var o=e[t.name];return e[t.name]=o?Object.assign({},o,t,{options:Object.assign({},o.options,t.options),data:Object.assign({},o.data,t.data)}):t,e}),{}),Object.keys(c).map((function(e){return c[e]}))));return l.orderedModifiers=p.filter((function(e){return e.enabled})),l.orderedModifiers.forEach((function(e){var t=e.name,o=e.options,n=void 0===o?{}:o,r=e.effect;if("function"==typeof r){var a=r({state:l,name:t,instance:u,options:n});s.push(a||function(){})}})),u.update()},forceUpdate:function(){if(!c){var e=l.elements,t=e.reference,o=e.popper;if(Ae(t,o)){l.rects={reference:ue(t,be(o),"fixed"===l.options.strategy),popper:de(o)},l.reset=!1,l.placement=l.options.placement,l.orderedModifiers.forEach((function(e){return l.modifiersData[e.name]=Object.assign({},e.data)}));for(var n=0;n<l.orderedModifiers.length;n++)if(!0!==l.reset){var r=l.orderedModifiers[n],a=r.fn,i=r.options,s=void 0===i?{}:i,d=r.name;"function"==typeof a&&(l=a({state:l,options:s,name:d,instance:u})||l)}else l.reset=!1,n=-1}}},update:(r=function(){return new Promise((function(e){u.forceUpdate(),e(l)}))},function(){return i||(i=new Promise((function(e){Promise.resolve().then((function(){i=void 0,e(r())}))}))),i}),destroy:function(){d(),c=!0}};if(!Ae(e,t))return u;function d(){s.forEach((function(e){return e()})),s=[]}return u.setOptions(o).then((function(e){!c&&o.onFirstUpdate&&o.onFirstUpdate(e)})),u}}var ze={passive:!0};function Le(e){return e.split("-")[0]}function Ve(e){return e.split("-")[1]}function je(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Ie(e){var t,o=e.reference,n=e.element,r=e.placement,a=r?Le(r):null,i=r?Ve(r):null,l=o.x+o.width/2-n.width/2,s=o.y+o.height/2-n.height/2;switch(a){case ye:t={x:l,y:o.y-n.height};break;case ve:t={x:l,y:o.y+o.height};break;case we:t={x:o.x+o.width,y:s};break;case xe:t={x:o.x-n.width,y:s};break;default:t={x:o.x,y:o.y}}var c=a?je(a):null;if(null!=c){var u="y"===c?"height":"width";switch(i){case Ce:t[c]=t[c]-(o[u]/2-n[u]/2);break;case Ee:t[c]=t[c]+(o[u]/2-n[u]/2)}}return t}var Be={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Ue(e){var t,o=e.popper,n=e.popperRect,r=e.placement,a=e.variation,i=e.offsets,l=e.position,s=e.gpuAcceleration,c=e.adaptive,u=e.roundOffsets,d=e.isFixed,p=i.x,f=void 0===p?0:p,m=i.y,h=void 0===m?0:m,g="function"==typeof u?u({x:f,y:h}):{x:f,y:h};f=g.x,h=g.y;var b=i.hasOwnProperty("x"),y=i.hasOwnProperty("y"),v=xe,w=ye,x=window;if(c){var T=be(o),S="clientHeight",C="clientWidth";T===q(o)&&"static"!==se(T=ie(o)).position&&"absolute"===l&&(S="scrollHeight",C="scrollWidth"),(r===ye||(r===xe||r===we)&&a===Ee)&&(w=ve,h-=(d&&T===x&&x.visualViewport?x.visualViewport.height:T[S])-n.height,h*=s?1:-1),r!==xe&&(r!==ye&&r!==ve||a!==Ee)||(v=we,f-=(d&&T===x&&x.visualViewport?x.visualViewport.width:T[C])-n.width,f*=s?1:-1)}var E,O=Object.assign({position:l},c&&Be),N=!0===u?function(e){var t=e.x,o=e.y,n=window.devicePixelRatio||1;return{x:ee(t*n)/n||0,y:ee(o*n)/n||0}}({x:f,y:h}):{x:f,y:h};return f=N.x,h=N.y,s?Object.assign({},O,((E={})[w]=y?"0":"",E[v]=b?"0":"",E.transform=(x.devicePixelRatio||1)<=1?"translate("+f+"px, "+h+"px)":"translate3d("+f+"px, "+h+"px, 0)",E)):Object.assign({},O,((t={})[w]=y?h+"px":"",t[v]=b?f+"px":"",t.transform="",t))}const _e={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var o=t.styles[e]||{},n=t.attributes[e]||{},r=t.elements[e];Y(r)&&ae(r)&&(Object.assign(r.style,o),Object.keys(n).forEach((function(e){var t=n[e];!1===t?r.removeAttribute(e):r.setAttribute(e,!0===t?"":t)})))}))},effect:function(e){var t=e.state,o={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,o.popper),t.styles=o,t.elements.arrow&&Object.assign(t.elements.arrow.style,o.arrow),function(){Object.keys(t.elements).forEach((function(e){var n=t.elements[e],r=t.attributes[e]||{},a=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:o[e]).reduce((function(e,t){return e[t]="",e}),{});Y(n)&&ae(n)&&(Object.assign(n.style,a),Object.keys(r).forEach((function(e){n.removeAttribute(e)})))}))}},requires:["computeStyles"]};var He={left:"right",right:"left",bottom:"top",top:"bottom"};function $e(e){return e.replace(/left|right|bottom|top/g,(function(e){return He[e]}))}var Ge={start:"end",end:"start"};function We(e){return e.replace(/start|end/g,(function(e){return Ge[e]}))}function Xe(e,t){var o=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(o&&J(o)){var n=t;do{if(n&&e.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function qe(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function Qe(e,t,o){return t===Oe?qe(function(e,t){var o=q(e),n=ie(e),r=o.visualViewport,a=n.clientWidth,i=n.clientHeight,l=0,s=0;if(r){a=r.width,i=r.height;var c=oe();(c||!c&&"fixed"===t)&&(l=r.offsetLeft,s=r.offsetTop)}return{width:a,height:i,x:l+le(e),y:s}}(e,o)):Q(t)?function(e,t){var o=ne(e,!1,"fixed"===t);return o.top=o.top+e.clientTop,o.left=o.left+e.clientLeft,o.bottom=o.top+e.clientHeight,o.right=o.left+e.clientWidth,o.width=e.clientWidth,o.height=e.clientHeight,o.x=o.left,o.y=o.top,o}(t,o):qe(function(e){var t,o=ie(e),n=re(e),r=null==(t=e.ownerDocument)?void 0:t.body,a=K(o.scrollWidth,o.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),i=K(o.scrollHeight,o.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),l=-n.scrollLeft+le(e),s=-n.scrollTop;return"rtl"===se(r||o).direction&&(l+=K(o.clientWidth,r?r.clientWidth:0)-a),{width:a,height:i,x:l,y:s}}(ie(e)))}function Ye(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function Je(e,t){return t.reduce((function(t,o){return t[o]=e,t}),{})}function Ke(e,t){void 0===t&&(t={});var o=t,n=o.placement,r=void 0===n?e.placement:n,a=o.strategy,i=void 0===a?e.strategy:a,l=o.boundary,s=void 0===l?"clippingParents":l,c=o.rootBoundary,u=void 0===c?Oe:c,d=o.elementContext,p=void 0===d?Ne:d,f=o.altBoundary,m=void 0!==f&&f,h=o.padding,g=void 0===h?0:h,b=Ye("number"!=typeof g?g:Je(g,Se)),y=p===Ne?"reference":Ne,v=e.rects.popper,w=e.elements[m?y:p],x=function(e,t,o,n){var r="clippingParents"===t?function(e){var t=me(pe(e)),o=["absolute","fixed"].indexOf(se(e).position)>=0&&Y(e)?be(e):e;return Q(o)?t.filter((function(e){return Q(e)&&Xe(e,o)&&"body"!==ae(e)})):[]}(e):[].concat(t),a=[].concat(r,[o]),i=a[0],l=a.reduce((function(t,o){var r=Qe(e,o,n);return t.top=K(r.top,t.top),t.right=Z(r.right,t.right),t.bottom=Z(r.bottom,t.bottom),t.left=K(r.left,t.left),t}),Qe(e,i,n));return l.width=l.right-l.left,l.height=l.bottom-l.top,l.x=l.left,l.y=l.top,l}(Q(w)?w:w.contextElement||ie(e.elements.popper),s,u,i),T=ne(e.elements.reference),S=Ie({reference:T,element:v,strategy:"absolute",placement:r}),C=qe(Object.assign({},v,S)),E=p===Ne?C:T,O={top:x.top-E.top+b.top,bottom:E.bottom-x.bottom+b.bottom,left:x.left-E.left+b.left,right:E.right-x.right+b.right},N=e.modifiersData.offset;if(p===Ne&&N){var D=N[r];Object.keys(O).forEach((function(e){var t=[we,ve].indexOf(e)>=0?1:-1,o=[ye,ve].indexOf(e)>=0?"y":"x";O[e]+=D[o]*t}))}return O}const Ze={name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,o=e.options,n=e.name;if(!t.modifiersData[n]._skip){for(var r=o.mainAxis,a=void 0===r||r,i=o.altAxis,l=void 0===i||i,s=o.fallbackPlacements,c=o.padding,u=o.boundary,d=o.rootBoundary,p=o.altBoundary,f=o.flipVariations,m=void 0===f||f,h=o.allowedAutoPlacements,g=t.options.placement,b=Le(g),y=s||(b!==g&&m?function(e){if(Le(e)===Te)return[];var t=$e(e);return[We(e),t,We(t)]}(g):[$e(g)]),v=[g].concat(y).reduce((function(e,o){return e.concat(Le(o)===Te?function(e,t){void 0===t&&(t={});var o=t,n=o.placement,r=o.boundary,a=o.rootBoundary,i=o.padding,l=o.flipVariations,s=o.allowedAutoPlacements,c=void 0===s?ke:s,u=Ve(n),d=u?l?De:De.filter((function(e){return Ve(e)===u})):Se,p=d.filter((function(e){return c.indexOf(e)>=0}));0===p.length&&(p=d);var f=p.reduce((function(t,o){return t[o]=Ke(e,{placement:o,boundary:r,rootBoundary:a,padding:i})[Le(o)],t}),{});return Object.keys(f).sort((function(e,t){return f[e]-f[t]}))}(t,{placement:o,boundary:u,rootBoundary:d,padding:c,flipVariations:m,allowedAutoPlacements:h}):o)}),[]),w=t.rects.reference,x=t.rects.popper,T=new Map,S=!0,C=v[0],E=0;E<v.length;E++){var O=v[E],N=Le(O),D=Ve(O)===Ce,k=[ye,ve].indexOf(N)>=0,F=k?"width":"height",P=Ke(t,{placement:O,boundary:u,rootBoundary:d,altBoundary:p,padding:c}),R=k?D?we:xe:D?ve:ye;w[F]>x[F]&&(R=$e(R));var A=$e(R),M=[];if(a&&M.push(P[N]<=0),l&&M.push(P[R]<=0,P[A]<=0),M.every((function(e){return e}))){C=O,S=!1;break}T.set(O,M)}if(S)for(var z=function(e){var t=v.find((function(t){var o=T.get(t);if(o)return o.slice(0,e).every((function(e){return e}))}));if(t)return C=t,"break"},L=m?3:1;L>0&&"break"!==z(L);L--);t.placement!==C&&(t.modifiersData[n]._skip=!0,t.placement=C,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function et(e,t,o){return K(e,Z(t,o))}function tt(e,t,o){return void 0===o&&(o={x:0,y:0}),{top:e.top-t.height-o.y,right:e.right-t.width+o.x,bottom:e.bottom-t.height+o.y,left:e.left-t.width-o.x}}function ot(e){return[ye,we,ve,xe].some((function(t){return e[t]>=0}))}var nt=Me({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,o=e.instance,n=e.options,r=n.scroll,a=void 0===r||r,i=n.resize,l=void 0===i||i,s=q(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return a&&c.forEach((function(e){e.addEventListener("scroll",o.update,ze)})),l&&s.addEventListener("resize",o.update,ze),function(){a&&c.forEach((function(e){e.removeEventListener("scroll",o.update,ze)})),l&&s.removeEventListener("resize",o.update,ze)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,o=e.name;t.modifiersData[o]=Ie({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,o=e.options,n=o.gpuAcceleration,r=void 0===n||n,a=o.adaptive,i=void 0===a||a,l=o.roundOffsets,s=void 0===l||l,c={placement:Le(t.placement),variation:Ve(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:r,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,Ue(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:i,roundOffsets:s})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,Ue(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:s})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}},_e,{name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,o=e.options,n=e.name,r=o.offset,a=void 0===r?[0,0]:r,i=ke.reduce((function(e,o){return e[o]=function(e,t,o){var n=Le(e),r=[xe,ye].indexOf(n)>=0?-1:1,a="function"==typeof o?o(Object.assign({},t,{placement:e})):o,i=a[0],l=a[1];return i=i||0,l=(l||0)*r,[xe,we].indexOf(n)>=0?{x:l,y:i}:{x:i,y:l}}(o,t.rects,a),e}),{}),l=i[t.placement],s=l.x,c=l.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=s,t.modifiersData.popperOffsets.y+=c),t.modifiersData[n]=i}},Ze,{name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,o=e.options,n=e.name,r=o.mainAxis,a=void 0===r||r,i=o.altAxis,l=void 0!==i&&i,s=o.boundary,c=o.rootBoundary,u=o.altBoundary,d=o.padding,p=o.tether,f=void 0===p||p,m=o.tetherOffset,h=void 0===m?0:m,g=Ke(t,{boundary:s,rootBoundary:c,padding:d,altBoundary:u}),b=Le(t.placement),y=Ve(t.placement),v=!y,w=je(b),x="x"===w?"y":"x",T=t.modifiersData.popperOffsets,S=t.rects.reference,C=t.rects.popper,E="function"==typeof h?h(Object.assign({},t.rects,{placement:t.placement})):h,O="number"==typeof E?{mainAxis:E,altAxis:E}:Object.assign({mainAxis:0,altAxis:0},E),N=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,D={x:0,y:0};if(T){if(a){var k,F="y"===w?ye:xe,P="y"===w?ve:we,R="y"===w?"height":"width",A=T[w],M=A+g[F],z=A-g[P],L=f?-C[R]/2:0,V=y===Ce?S[R]:C[R],j=y===Ce?-C[R]:-S[R],I=t.elements.arrow,B=f&&I?de(I):{width:0,height:0},U=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},_=U[F],H=U[P],$=et(0,S[R],B[R]),G=v?S[R]/2-L-$-_-O.mainAxis:V-$-_-O.mainAxis,W=v?-S[R]/2+L+$+H+O.mainAxis:j+$+H+O.mainAxis,X=t.elements.arrow&&be(t.elements.arrow),q=X?"y"===w?X.clientTop||0:X.clientLeft||0:0,Q=null!=(k=null==N?void 0:N[w])?k:0,Y=A+W-Q,J=et(f?Z(M,A+G-Q-q):M,A,f?K(z,Y):z);T[w]=J,D[w]=J-A}if(l){var ee,te="x"===w?ye:xe,oe="x"===w?ve:we,ne=T[x],re="y"===x?"height":"width",ae=ne+g[te],ie=ne-g[oe],le=-1!==[ye,xe].indexOf(b),se=null!=(ee=null==N?void 0:N[x])?ee:0,ce=le?ae:ne-S[re]-C[re]-se+O.altAxis,ue=le?ne+S[re]+C[re]-se-O.altAxis:ie,pe=f&&le?function(e,t,o){var n=et(e,t,o);return n>o?o:n}(ce,ne,ue):et(f?ce:ae,ne,f?ue:ie);T[x]=pe,D[x]=pe-ne}t.modifiersData[n]=D}},requiresIfExists:["offset"]},{name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,o=e.state,n=e.name,r=e.options,a=o.elements.arrow,i=o.modifiersData.popperOffsets,l=Le(o.placement),s=je(l),c=[xe,we].indexOf(l)>=0?"height":"width";if(a&&i){var u=function(e,t){return Ye("number"!=typeof(e="function"==typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:Je(e,Se))}(r.padding,o),d=de(a),p="y"===s?ye:xe,f="y"===s?ve:we,m=o.rects.reference[c]+o.rects.reference[s]-i[s]-o.rects.popper[c],h=i[s]-o.rects.reference[s],g=be(a),b=g?"y"===s?g.clientHeight||0:g.clientWidth||0:0,y=m/2-h/2,v=u[p],w=b-d[c]-u[f],x=b/2-d[c]/2+y,T=et(v,x,w),S=s;o.modifiersData[n]=((t={})[S]=T,t.centerOffset=T-x,t)}},effect:function(e){var t=e.state,o=e.options.element,n=void 0===o?"[data-popper-arrow]":o;null!=n&&("string"!=typeof n||(n=t.elements.popper.querySelector(n)))&&Xe(t.elements.popper,n)&&(t.elements.arrow=n)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]},{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,o=e.name,n=t.rects.reference,r=t.rects.popper,a=t.modifiersData.preventOverflow,i=Ke(t,{elementContext:"reference"}),l=Ke(t,{altBoundary:!0}),s=tt(i,n),c=tt(l,r,a),u=ot(s),d=ot(c);t.modifiersData[o]={referenceClippingOffsets:s,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:d},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}}]}),rt="tippy-content",at="tippy-arrow",it="tippy-svg-arrow",lt={passive:!0,capture:!0},st=function(){return document.body};function ct(e,t,o){if(Array.isArray(e)){var n=e[t];return null==n?Array.isArray(o)?o[t]:o:n}return e}function ut(e,t){var o={}.toString.call(e);return 0===o.indexOf("[object")&&o.indexOf(t+"]")>-1}function dt(e,t){return"function"==typeof e?e.apply(void 0,t):e}function pt(e,t){return 0===t?e:function(n){clearTimeout(o),o=setTimeout((function(){e(n)}),t)};var o}function ft(e){return[].concat(e)}function mt(e,t){-1===e.indexOf(t)&&e.push(t)}function ht(e){return[].slice.call(e)}function gt(e){return Object.keys(e).reduce((function(t,o){return void 0!==e[o]&&(t[o]=e[o]),t}),{})}function bt(){return document.createElement("div")}function yt(e){return["Element","Fragment"].some((function(t){return ut(e,t)}))}function vt(e){return ut(e,"MouseEvent")}function wt(e,t){e.forEach((function(e){e&&(e.style.transitionDuration=t+"ms")}))}function xt(e,t){e.forEach((function(e){e&&e.setAttribute("data-state",t)}))}function Tt(e){var t,o=ft(e)[0];return null!=o&&null!=(t=o.ownerDocument)&&t.body?o.ownerDocument:document}function St(e,t,o){var n=t+"EventListener";["transitionend","webkitTransitionEnd"].forEach((function(t){e[n](t,o)}))}function Ct(e,t){for(var o=t;o;){var n;if(e.contains(o))return!0;o=null==o.getRootNode||null==(n=o.getRootNode())?void 0:n.host}return!1}var Et={isTouch:!1},Ot=0;function Nt(){Et.isTouch||(Et.isTouch=!0,window.performance&&document.addEventListener("mousemove",Dt))}function Dt(){var e=performance.now();e-Ot<20&&(Et.isTouch=!1,document.removeEventListener("mousemove",Dt)),Ot=e}function kt(){var e,t=document.activeElement;if((e=t)&&e._tippy&&e._tippy.reference===e){var o=t._tippy;t.blur&&!o.state.isVisible&&t.blur()}}var Ft=!("undefined"==typeof window||"undefined"==typeof document||!window.msCrypto),Pt=Object.assign({appendTo:st,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},{animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},{allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999}),Rt=Object.keys(Pt);function At(e){var t=(e.plugins||[]).reduce((function(t,o){var n,r=o.name,a=o.defaultValue;return r&&(t[r]=void 0!==e[r]?e[r]:null!=(n=Pt[r])?n:a),t}),{});return Object.assign({},e,t)}function Mt(e,t){var o=Object.assign({},t,{content:dt(t.content,[e])},t.ignoreAttributes?{}:function(e,t){return(t?Object.keys(At(Object.assign({},Pt,{plugins:t}))):Rt).reduce((function(t,o){var n=(e.getAttribute("data-tippy-"+o)||"").trim();if(!n)return t;if("content"===o)t[o]=n;else try{t[o]=JSON.parse(n)}catch(e){t[o]=n}return t}),{})}(e,t.plugins));return o.aria=Object.assign({},Pt.aria,o.aria),o.aria={expanded:"auto"===o.aria.expanded?t.interactive:o.aria.expanded,content:"auto"===o.aria.content?t.interactive?null:"describedby":o.aria.content},o}function zt(e,t){e.innerHTML=t}function Lt(e){var t=bt();return!0===e?t.className=at:(t.className=it,yt(e)?t.appendChild(e):zt(t,e)),t}function Vt(e,t){yt(t.content)?(zt(e,""),e.appendChild(t.content)):"function"!=typeof t.content&&(t.allowHTML?zt(e,t.content):e.textContent=t.content)}function jt(e){var t=e.firstElementChild,o=ht(t.children);return{box:t,content:o.find((function(e){return e.classList.contains(rt)})),arrow:o.find((function(e){return e.classList.contains(at)||e.classList.contains(it)})),backdrop:o.find((function(e){return e.classList.contains("tippy-backdrop")}))}}function It(e){var t=bt(),o=bt();o.className="tippy-box",o.setAttribute("data-state","hidden"),o.setAttribute("tabindex","-1");var n=bt();function r(o,n){var r=jt(t),a=r.box,i=r.content,l=r.arrow;n.theme?a.setAttribute("data-theme",n.theme):a.removeAttribute("data-theme"),"string"==typeof n.animation?a.setAttribute("data-animation",n.animation):a.removeAttribute("data-animation"),n.inertia?a.setAttribute("data-inertia",""):a.removeAttribute("data-inertia"),a.style.maxWidth="number"==typeof n.maxWidth?n.maxWidth+"px":n.maxWidth,n.role?a.setAttribute("role",n.role):a.removeAttribute("role"),o.content===n.content&&o.allowHTML===n.allowHTML||Vt(i,e.props),n.arrow?l?o.arrow!==n.arrow&&(a.removeChild(l),a.appendChild(Lt(n.arrow))):a.appendChild(Lt(n.arrow)):l&&a.removeChild(l)}return n.className=rt,n.setAttribute("data-state","hidden"),Vt(n,e.props),t.appendChild(o),o.appendChild(n),r(e.props,e.props),{popper:t,onUpdate:r}}It.$$tippy=!0;var Bt=1,Ut=[],_t=[];function Ht(e,t){var o,n,r,a,i,l,s,c,u=Mt(e,Object.assign({},Pt,At(gt(t)))),d=!1,p=!1,f=!1,m=!1,h=[],g=pt(X,u.interactiveDebounce),b=Bt++,y=(c=u.plugins).filter((function(e,t){return c.indexOf(e)===t})),v={id:b,reference:e,popper:bt(),popperInstance:null,props:u,state:{isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},plugins:y,clearDelayTimeouts:function(){clearTimeout(o),clearTimeout(n),cancelAnimationFrame(r)},setProps:function(t){if(!v.state.isDestroyed){A("onBeforeUpdate",[v,t]),G();var o=v.props,n=Mt(e,Object.assign({},o,gt(t),{ignoreAttributes:!0}));v.props=n,$(),o.interactiveDebounce!==n.interactiveDebounce&&(L(),g=pt(X,n.interactiveDebounce)),o.triggerTarget&&!n.triggerTarget?ft(o.triggerTarget).forEach((function(e){e.removeAttribute("aria-expanded")})):n.triggerTarget&&e.removeAttribute("aria-expanded"),z(),R(),T&&T(o,n),v.popperInstance&&(J(),Z().forEach((function(e){requestAnimationFrame(e._tippy.popperInstance.forceUpdate)}))),A("onAfterUpdate",[v,t])}},setContent:function(e){v.setProps({content:e})},show:function(){var e=v.state.isVisible,t=v.state.isDestroyed,o=!v.state.isEnabled,n=Et.isTouch&&!v.props.touch,r=ct(v.props.duration,0,Pt.duration);if(!(e||t||o||n||D().hasAttribute("disabled")||(A("onShow",[v],!1),!1===v.props.onShow(v)))){if(v.state.isVisible=!0,N()&&(x.style.visibility="visible"),R(),B(),v.state.isMounted||(x.style.transition="none"),N()){var a=F();wt([a.box,a.content],0)}var i,s,c;l=function(){var e;if(v.state.isVisible&&!m){if(m=!0,x.offsetHeight,x.style.transition=v.props.moveTransition,N()&&v.props.animation){var t=F(),o=t.box,n=t.content;wt([o,n],r),xt([o,n],"visible")}M(),z(),mt(_t,v),null==(e=v.popperInstance)||e.forceUpdate(),A("onMount",[v]),v.props.animation&&N()&&function(e,t){_(e,(function(){v.state.isShown=!0,A("onShown",[v])}))}(r)}},s=v.props.appendTo,c=D(),(i=v.props.interactive&&s===st||"parent"===s?c.parentNode:dt(s,[c])).contains(x)||i.appendChild(x),v.state.isMounted=!0,J()}},hide:function(){var e=!v.state.isVisible,t=v.state.isDestroyed,o=!v.state.isEnabled,n=ct(v.props.duration,1,Pt.duration);if(!(e||t||o)&&(A("onHide",[v],!1),!1!==v.props.onHide(v))){if(v.state.isVisible=!1,v.state.isShown=!1,m=!1,d=!1,N()&&(x.style.visibility="hidden"),L(),U(),R(!0),N()){var r=F(),a=r.box,i=r.content;v.props.animation&&(wt([a,i],n),xt([a,i],"hidden"))}M(),z(),v.props.animation?N()&&function(e,t){_(e,(function(){!v.state.isVisible&&x.parentNode&&x.parentNode.contains(x)&&t()}))}(n,v.unmount):v.unmount()}},hideWithInteractivity:function(e){k().addEventListener("mousemove",g),mt(Ut,g),g(e)},enable:function(){v.state.isEnabled=!0},disable:function(){v.hide(),v.state.isEnabled=!1},unmount:function(){v.state.isVisible&&v.hide(),v.state.isMounted&&(K(),Z().forEach((function(e){e._tippy.unmount()})),x.parentNode&&x.parentNode.removeChild(x),_t=_t.filter((function(e){return e!==v})),v.state.isMounted=!1,A("onHidden",[v]))},destroy:function(){v.state.isDestroyed||(v.clearDelayTimeouts(),v.unmount(),G(),delete e._tippy,v.state.isDestroyed=!0,A("onDestroy",[v]))}};if(!u.render)return v;var w=u.render(v),x=w.popper,T=w.onUpdate;x.setAttribute("data-tippy-root",""),x.id="tippy-"+v.id,v.popper=x,e._tippy=v,x._tippy=v;var S=y.map((function(e){return e.fn(v)})),C=e.hasAttribute("aria-expanded");return $(),z(),R(),A("onCreate",[v]),u.showOnCreate&&ee(),x.addEventListener("mouseenter",(function(){v.props.interactive&&v.state.isVisible&&v.clearDelayTimeouts()})),x.addEventListener("mouseleave",(function(){v.props.interactive&&v.props.trigger.indexOf("mouseenter")>=0&&k().addEventListener("mousemove",g)})),v;function E(){var e=v.props.touch;return Array.isArray(e)?e:[e,0]}function O(){return"hold"===E()[0]}function N(){var e;return!(null==(e=v.props.render)||!e.$$tippy)}function D(){return s||e}function k(){var e=D().parentNode;return e?Tt(e):document}function F(){return jt(x)}function P(e){return v.state.isMounted&&!v.state.isVisible||Et.isTouch||a&&"focus"===a.type?0:ct(v.props.delay,e?0:1,Pt.delay)}function R(e){void 0===e&&(e=!1),x.style.pointerEvents=v.props.interactive&&!e?"":"none",x.style.zIndex=""+v.props.zIndex}function A(e,t,o){var n;void 0===o&&(o=!0),S.forEach((function(o){o[e]&&o[e].apply(o,t)})),o&&(n=v.props)[e].apply(n,t)}function M(){var t=v.props.aria;if(t.content){var o="aria-"+t.content,n=x.id;ft(v.props.triggerTarget||e).forEach((function(e){var t=e.getAttribute(o);if(v.state.isVisible)e.setAttribute(o,t?t+" "+n:n);else{var r=t&&t.replace(n,"").trim();r?e.setAttribute(o,r):e.removeAttribute(o)}}))}}function z(){!C&&v.props.aria.expanded&&ft(v.props.triggerTarget||e).forEach((function(e){v.props.interactive?e.setAttribute("aria-expanded",v.state.isVisible&&e===D()?"true":"false"):e.removeAttribute("aria-expanded")}))}function L(){k().removeEventListener("mousemove",g),Ut=Ut.filter((function(e){return e!==g}))}function V(t){if(!Et.isTouch||!f&&"mousedown"!==t.type){var o=t.composedPath&&t.composedPath()[0]||t.target;if(!v.props.interactive||!Ct(x,o)){if(ft(v.props.triggerTarget||e).some((function(e){return Ct(e,o)}))){if(Et.isTouch)return;if(v.state.isVisible&&v.props.trigger.indexOf("click")>=0)return}else A("onClickOutside",[v,t]);!0===v.props.hideOnClick&&(v.clearDelayTimeouts(),v.hide(),p=!0,setTimeout((function(){p=!1})),v.state.isMounted||U())}}}function j(){f=!0}function I(){f=!1}function B(){var e=k();e.addEventListener("mousedown",V,!0),e.addEventListener("touchend",V,lt),e.addEventListener("touchstart",I,lt),e.addEventListener("touchmove",j,lt)}function U(){var e=k();e.removeEventListener("mousedown",V,!0),e.removeEventListener("touchend",V,lt),e.removeEventListener("touchstart",I,lt),e.removeEventListener("touchmove",j,lt)}function _(e,t){var o=F().box;function n(e){e.target===o&&(St(o,"remove",n),t())}if(0===e)return t();St(o,"remove",i),St(o,"add",n),i=n}function H(t,o,n){void 0===n&&(n=!1),ft(v.props.triggerTarget||e).forEach((function(e){e.addEventListener(t,o,n),h.push({node:e,eventType:t,handler:o,options:n})}))}function $(){var e;O()&&(H("touchstart",W,{passive:!0}),H("touchend",q,{passive:!0})),(e=v.props.trigger,e.split(/\s+/).filter(Boolean)).forEach((function(e){if("manual"!==e)switch(H(e,W),e){case"mouseenter":H("mouseleave",q);break;case"focus":H(Ft?"focusout":"blur",Q);break;case"focusin":H("focusout",Q)}}))}function G(){h.forEach((function(e){var t=e.node,o=e.eventType,n=e.handler,r=e.options;t.removeEventListener(o,n,r)})),h=[]}function W(e){var t,o=!1;if(v.state.isEnabled&&!Y(e)&&!p){var n="focus"===(null==(t=a)?void 0:t.type);a=e,s=e.currentTarget,z(),!v.state.isVisible&&vt(e)&&Ut.forEach((function(t){return t(e)})),"click"===e.type&&(v.props.trigger.indexOf("mouseenter")<0||d)&&!1!==v.props.hideOnClick&&v.state.isVisible?o=!0:ee(e),"click"===e.type&&(d=!o),o&&!n&&te(e)}}function X(e){var t=e.target,o=D().contains(t)||x.contains(t);if("mousemove"!==e.type||!o){var n=Z().concat(x).map((function(e){var t,o=null==(t=e._tippy.popperInstance)?void 0:t.state;return o?{popperRect:e.getBoundingClientRect(),popperState:o,props:u}:null})).filter(Boolean);(function(e,t){var o=t.clientX,n=t.clientY;return e.every((function(e){var t=e.popperRect,r=e.popperState,a=e.props.interactiveBorder,i=r.placement.split("-")[0],l=r.modifiersData.offset;if(!l)return!0;var s="bottom"===i?l.top.y:0,c="top"===i?l.bottom.y:0,u="right"===i?l.left.x:0,d="left"===i?l.right.x:0,p=t.top-n+s>a,f=n-t.bottom-c>a,m=t.left-o+u>a,h=o-t.right-d>a;return p||f||m||h}))})(n,e)&&(L(),te(e))}}function q(e){Y(e)||v.props.trigger.indexOf("click")>=0&&d||(v.props.interactive?v.hideWithInteractivity(e):te(e))}function Q(e){v.props.trigger.indexOf("focusin")<0&&e.target!==D()||v.props.interactive&&e.relatedTarget&&x.contains(e.relatedTarget)||te(e)}function Y(e){return!!Et.isTouch&&O()!==e.type.indexOf("touch")>=0}function J(){K();var t=v.props,o=t.popperOptions,n=t.placement,r=t.offset,a=t.getReferenceClientRect,i=t.moveTransition,s=N()?jt(x).arrow:null,c=a?{getBoundingClientRect:a,contextElement:a.contextElement||D()}:e,u=[{name:"offset",options:{offset:r}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!i}},{name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(e){var t=e.state;if(N()){var o=F().box;["placement","reference-hidden","escaped"].forEach((function(e){"placement"===e?o.setAttribute("data-placement",t.placement):t.attributes.popper["data-popper-"+e]?o.setAttribute("data-"+e,""):o.removeAttribute("data-"+e)})),t.attributes.popper={}}}}];N()&&s&&u.push({name:"arrow",options:{element:s,padding:3}}),u.push.apply(u,(null==o?void 0:o.modifiers)||[]),v.popperInstance=nt(c,x,Object.assign({},o,{placement:n,onFirstUpdate:l,modifiers:u}))}function K(){v.popperInstance&&(v.popperInstance.destroy(),v.popperInstance=null)}function Z(){return ht(x.querySelectorAll("[data-tippy-root]"))}function ee(e){v.clearDelayTimeouts(),e&&A("onTrigger",[v,e]),B();var t=P(!0),n=E(),r=n[0],a=n[1];Et.isTouch&&"hold"===r&&a&&(t=a),t?o=setTimeout((function(){v.show()}),t):v.show()}function te(e){if(v.clearDelayTimeouts(),A("onUntrigger",[v,e]),v.state.isVisible){if(!(v.props.trigger.indexOf("mouseenter")>=0&&v.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(e.type)>=0&&d)){var t=P(!1);t?n=setTimeout((function(){v.state.isVisible&&v.hide()}),t):r=requestAnimationFrame((function(){v.hide()}))}}else U()}}function $t(e,t){void 0===t&&(t={});var o=Pt.plugins.concat(t.plugins||[]);document.addEventListener("touchstart",Nt,lt),window.addEventListener("blur",kt);var n,r=Object.assign({},t,{plugins:o}),a=(n=e,yt(n)?[n]:function(e){return ut(e,"NodeList")}(n)?ht(n):Array.isArray(n)?n:ht(document.querySelectorAll(n))).reduce((function(e,t){var o=t&&Ht(t,r);return o&&e.push(o),e}),[]);return yt(e)?a[0]:a}$t.defaultProps=Pt,$t.setDefaultProps=function(e){Object.keys(e).forEach((function(t){Pt[t]=e[t]}))},$t.currentInput=Et,Object.assign({},_e,{effect:function(e){var t=e.state,o={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(t.elements.popper.style,o.popper),t.styles=o,t.elements.arrow&&Object.assign(t.elements.arrow.style,o.arrow)}});var Gt={clientX:0,clientY:0},Wt=[];function Xt(e){var t=e.clientX,o=e.clientY;Gt={clientX:t,clientY:o}}var qt={name:"followCursor",defaultValue:!1,fn:function(e){var t=e.reference,o=Tt(e.props.triggerTarget||t),n=!1,r=!1,a=!0,i=e.props;function l(){return"initial"===e.props.followCursor&&e.state.isVisible}function s(){o.addEventListener("mousemove",d)}function c(){o.removeEventListener("mousemove",d)}function u(){n=!0,e.setProps({getReferenceClientRect:null}),n=!1}function d(o){var n=!o.target||t.contains(o.target),r=e.props.followCursor,a=o.clientX,i=o.clientY,l=t.getBoundingClientRect(),s=a-l.left,c=i-l.top;!n&&e.props.interactive||e.setProps({getReferenceClientRect:function(){var e=t.getBoundingClientRect(),o=a,n=i;"initial"===r&&(o=e.left+s,n=e.top+c);var l="horizontal"===r?e.top:n,u="vertical"===r?e.right:o,d="horizontal"===r?e.bottom:n,p="vertical"===r?e.left:o;return{width:u-p,height:d-l,top:l,right:u,bottom:d,left:p}}})}function p(){e.props.followCursor&&(Wt.push({instance:e,doc:o}),function(e){e.addEventListener("mousemove",Xt)}(o))}function f(){0===(Wt=Wt.filter((function(t){return t.instance!==e}))).filter((function(e){return e.doc===o})).length&&function(e){e.removeEventListener("mousemove",Xt)}(o)}return{onCreate:p,onDestroy:f,onBeforeUpdate:function(){i=e.props},onAfterUpdate:function(t,o){var a=o.followCursor;n||void 0!==a&&i.followCursor!==a&&(f(),a?(p(),!e.state.isMounted||r||l()||s()):(c(),u()))},onMount:function(){e.props.followCursor&&!r&&(a&&(d(Gt),a=!1),l()||s())},onTrigger:function(e,t){vt(t)&&(Gt={clientX:t.clientX,clientY:t.clientY}),r="focus"===t.type},onHidden:function(){e.props.followCursor&&(u(),c(),a=!0)}}}};$t.setDefaultProps({render:It});const Qt=$t;var Yt=u(729);function Jt(e,t){if(null==e)return{};var o,n,r={},a=Object.keys(e);for(n=0;n<a.length;n++)o=a[n],t.indexOf(o)>=0||(r[o]=e[o]);return r}var Kt="undefined"!=typeof window&&"undefined"!=typeof document;function Zt(e,t){e&&("function"==typeof e&&e(t),{}.hasOwnProperty.call(e,"current")&&(e.current=t))}function eo(){return Kt&&document.createElement("div")}function to(e,t){if(e===t)return!0;if("object"==typeof e&&null!=e&&"object"==typeof t&&null!=t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var o in e){if(!t.hasOwnProperty(o))return!1;if(!to(e[o],t[o]))return!1}return!0}return!1}function oo(e){var t=[];return e.forEach((function(e){t.find((function(t){return to(e,t)}))||t.push(e)})),t}var no=Kt?s.useLayoutEffect:s.useEffect;function ro(e,t,o){o.split(/\s+/).forEach((function(o){o&&e.classList[t](o)}))}var ao={name:"className",defaultValue:"",fn:function(e){var t=e.popper.firstElementChild,o=function(){var t;return!!(null==(t=e.props.render)?void 0:t.$$tippy)};function n(){e.props.className&&!o()||ro(t,"add",e.props.className)}return{onCreate:n,onBeforeUpdate:function(){o()&&ro(t,"remove",e.props.className)},onAfterUpdate:n}}};function io(e){return function(t){var o,n,r=t.children,a=t.content,i=t.visible,l=t.singleton,u=t.render,d=t.reference,p=t.disabled,f=void 0!==p&&p,m=t.ignoreAttributes,h=void 0===m||m,g=(t.__source,t.__self,Jt(t,["children","content","visible","singleton","render","reference","disabled","ignoreAttributes","__source","__self"])),b=void 0!==i,y=void 0!==l,v=(0,s.useState)(!1),w=v[0],x=v[1],T=(0,s.useState)({}),S=T[0],C=T[1],E=(0,s.useState)(),O=E[0],N=E[1],D=(o=function(){return{container:eo(),renders:1}},(n=(0,s.useRef)()).current||(n.current="function"==typeof o?o():o),n.current),k=Object.assign({ignoreAttributes:h},g,{content:D.container});b&&(k.trigger="manual",k.hideOnClick=!1),y&&(f=!0);var F=k,P=k.plugins||[];u&&(F=Object.assign({},k,{plugins:y&&null!=l.data?[].concat(P,[{fn:function(){return{onTrigger:function(e,t){var o=l.data.children.find((function(e){return e.instance.reference===t.currentTarget}));e.state.$$activeSingletonInstance=o.instance,N(o.content)}}}}]):P,render:function(){return{popper:D.container}}}));var R=[d].concat(r?[r.type]:[]);return no((function(){var t=d;d&&d.hasOwnProperty("current")&&(t=d.current);var o=e(t||D.ref||eo(),Object.assign({},F,{plugins:[ao].concat(k.plugins||[])}));return D.instance=o,f&&o.disable(),i&&o.show(),y&&l.hook({instance:o,content:a,props:F,setSingletonContent:N}),x(!0),function(){o.destroy(),null==l||l.cleanup(o)}}),R),no((function(){var e,t,o,n,r;if(1!==D.renders){var s=D.instance;s.setProps((t=s.props,o=F,Object.assign({},o,{popperOptions:Object.assign({},t.popperOptions,o.popperOptions,{modifiers:oo([].concat((null==(n=t.popperOptions)?void 0:n.modifiers)||[],(null==(r=o.popperOptions)?void 0:r.modifiers)||[]))})}))),null==(e=s.popperInstance)||e.forceUpdate(),f?s.disable():s.enable(),b&&(i?s.show():s.hide()),y&&l.hook({instance:s,content:a,props:F,setSingletonContent:N})}else D.renders++})),no((function(){var e;if(u){var t=D.instance;t.setProps({popperOptions:Object.assign({},t.props.popperOptions,{modifiers:[].concat(((null==(e=t.props.popperOptions)?void 0:e.modifiers)||[]).filter((function(e){return"$$tippyReact"!==e.name})),[{name:"$$tippyReact",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(e){var t,o=e.state,n=null==(t=o.modifiersData)?void 0:t.hide;S.placement===o.placement&&S.referenceHidden===(null==n?void 0:n.isReferenceHidden)&&S.escaped===(null==n?void 0:n.hasPopperEscaped)||C({placement:o.placement,referenceHidden:null==n?void 0:n.isReferenceHidden,escaped:null==n?void 0:n.hasPopperEscaped}),o.attributes.popper={}}}])})})}}),[S.placement,S.referenceHidden,S.escaped].concat(R)),c().createElement(c().Fragment,null,r?(0,s.cloneElement)(r,{ref:function(e){D.ref=e,Zt(r.ref,e)}}):null,w&&(0,Yt.createPortal)(u?u(function(e){var t={"data-placement":e.placement};return e.referenceHidden&&(t["data-reference-hidden"]=""),e.escaped&&(t["data-escaped"]=""),t}(S),O,D.instance):a,D.container))}}var lo=function(e,t){return(0,s.forwardRef)((function(o,n){var r=o.children,a=Jt(o,["children"]);return c().createElement(e,Object.assign({},t,a),r?(0,s.cloneElement)(r,{ref:function(e){Zt(n,e),Zt(r.ref,e)}}):null)}))};const so=lo(io(Qt)),co=({data:e,renderTime:o,showTime:n,valueEnabled:a,reference:i,visible:l,followMouse:s,primarySortByField:u,primarySortDirection:d,secondarySortByField:m,secondarySortDirection:h,displayMode:g,tooltipDisplayTextTriggeredEmpty:b})=>{const y=(0,p.useStyles2)(uo);return c().createElement(so,{ref:i,visible:l,content:c().createElement("table",{className:y.tooltipTable},c().createElement("thead",null,e&&e.isComposite&&(e=>e&&e.members&&0===e.members.length?"":c().createElement("tr",null,c().createElement("th",{className:y.tooltipCompositeHeading,colSpan:2},e.displayName)))(e),c().createElement("tr",null,c().createElement("th",{className:y.tooltipNameHeading},"Name"),a&&c().createElement("th",{className:y.tooltipValueHeading},"Value"))),c().createElement("tfoot",null,n&&c().createElement("tr",null,c().createElement("td",{className:y.tooltipTime,colSpan:2},(0,t.dateTimeFormatWithAbbrevation)(o)))),c().createElement("tbody",null,e&&e.isComposite?(e=>{let t=e;if(t&&e&&"triggered"===g&&(t=(e=>{const t=(e=>{let t=0;0!==e.thresholdLevel&&t++;for(let o=0;o<e.members.length;o++)0!==e.members[o].thresholdLevel&&t++;return t})(e);if(t>0){for(let t=0;t<e.members.length;t++)0===e.members[t].thresholdLevel&&e.members.splice(t,1);return e}return null})(e)),null===t)return c().createElement(c().Fragment,null,b);const o=((e,t,o,n,a)=>{let i=po(r[t].value);const l=i.lowerCase,s=i.direction;i=po(r[n].value);const c=i.direction,u=i.lowerCase;let d=o;l&&(d=e=>{let t=e[o];return"number"!=typeof t&&(t=t.toLowerCase()),t});let p=a;return u&&(p=e=>{let t=e[a];return"number"!=typeof t&&(t=t.toLowerCase()),t}),(0,f.orderBy)(e.members,[d,p],[s,c])})(t,d,u,h,m);return o.map(((e,t)=>c().createElement("tr",{key:t,style:{color:e.color}},c().createElement("td",{className:y.tooltipName},e.displayName),a&&c().createElement("td",{className:y.tooltipValue},e.valueFormatted))))})(e):c().createElement("tr",{style:{color:e.color}},c().createElement("td",{className:y.tooltipName},e.displayName),a&&c().createElement("td",{className:y.tooltipValue},e.valueFormatted)))),followCursor:!!s,plugins:[qt],animation:!1,className:y.root,placement:"auto",maxWidth:500})},uo=e=>({root:x.css`
      border-radius: ${e.shape.borderRadius(1)};
      background-color: ${e.colors.background.primary};
      box-shadow: ${e.shadows.z2};
      padding: ${e.spacing(1)};
    `,tooltipTable:x.css`
      width: 100%;
      color: ${e.colors.text.primary};
      height: auto;
      padding: 10px;
    `,tooltipTime:x.css`
      text-align: center;
      color: ${e.colors.text.primary};
    `,tooltipNameHeading:x.css`
      text-align: left;
      color: ${e.colors.text.primary};
    `,tooltipValueHeading:x.css`
      text-align: right;
      color: ${e.colors.text.primary};
    `,tooltipCompositeHeading:x.css`
      text-align: center;
      color: ${e.colors.text.primary};
    `,tooltipName:x.css`
      text-align: left;
    `,tooltipValue:x.css`
      text-align: right;
      padding-left: 15px;
    `}),po=e=>{switch(e){case 0:return{direction:null,lowerCase:!1};case 1:case 3:default:return{direction:"asc",lowerCase:!1};case 2:case 4:return{direction:"desc",lowerCase:!1};case 5:return{direction:"asc",lowerCase:!0};case 6:return{direction:"desc",lowerCase:!0}}},fo=t=>{const o=(0,p.useStyles2)(wo),n=(0,p.useStyles2)(xo),r=(0,p.useStyles2)(yo),a=(0,p.useStyles2)(vo),[i,l]=c().useState([]),[u,d]=c().useState([]),[f,m]=c().useState([]),[h,g]=c().useState([]);(0,s.useEffect)((()=>{if(t.processedData.length>0){const e=[],o=[];for(let n=0;n<t.processedData.length;n++)e.push((0,s.createRef)()),o.push(0);e.length>0&&(d(e),m(o))}}),[t.processedData]),(0,s.useEffect)((()=>{l((e=>Array(t.processedData.length).fill(0).map(((t,o)=>e[o]||(0,s.createRef)()))))}),[t.processedData]);const[b,y]=(0,s.useState)([]);(0,s.useEffect)((()=>{y((e=>Array(t.processedData.length).fill(!1)))}),[t.processedData]);const v=(0,s.useCallback)((()=>{for(let e=0;e<h.length;e++){let o=h[e],n=f[o];if(u.length>0&&u[o].current&&t.processedData){const e=t.processedData[o],r=mo(n,e,t.globalDisplayTextTriggeredEmpty);null!==u[o].current.innerHTML&&(u[o].current.innerHTML=r)}n++,t.processedData&&t.processedData[o]&&t.processedData[o].members.length&&(n%=t.processedData[o].members.length),f[o]=n,m(f)}}),[f,u,h,t.processedData,t.globalDisplayTextTriggeredEmpty]);if((0,s.useEffect)((()=>{let e=!1;const o=[];let n;if(t.processedData.map(((t,n)=>{t.isComposite&&t.showValue&&(e=!0,o.push(n))})),g(o),e){let e=parseInt(t.compositeConfig.animationSpeed,10);(e<200||isNaN(e))&&(console.log("WARNING: speed in configuration is too fast, setting to 200ms"),e=200),n=setInterval(v,e)}return()=>{clearInterval(n)}}),[t.compositeConfig.animationSpeed,t.processedData,u]),t.processedData&&0===t.processedData.length)return c().createElement("div",{className:r},t.globalDisplayTextTriggeredEmpty);if(!t.autoSizeColumns&&!t.autoSizeRows){const e=t.layoutNumColumns*t.layoutNumRows;if(e<t.processedData.length)return c().createElement("div",{className:a},"Not enoughs rows and columns for data. There are ",t.processedData.length," items to display, and only"," ",e," places allocated."," ")}const w=new G(t.panelWidth,t.panelHeight,t.layoutNumColumns,t.layoutNumRows,t.layoutDisplayLimit,t.autoSizePolygons,t.globalShape);w.generatePossibleColumnAndRowsSizes(t.autoSizeColumns,t.autoSizeRows,t.processedData.length),w.generateActualColumnAndRowUsage(t.processedData,t.layoutDisplayLimit);let x=0;!t.autoSizePolygons&&t.globalPolygonSize?(t.globalPolygonSize<0||isNaN(t.globalPolygonSize)?(t.globalPolygonSize=50,console.log("WARNING: polygon size is manually set to an invalid value, forcing to 50px")):w.setRadius(t.globalPolygonSize),x=t.globalPolygonSize):x=w.generateRadius(t.globalShape);const T=w.generatePoints(t.processedData,t.layoutDisplayLimit,t.globalShape),S=function(){var e,t,o,n=0,r=0,a=1,i=1,l=U,s=_;function c(e){var n,r={},a=[],i=e.length;for(n=0;n<i;++n)if(!isNaN(u=+l.call(null,c=e[n],n,e))&&!isNaN(d=+s.call(null,c,n,e))){var c,u,d,p=Math.round(d/=o),f=Math.round(u=u/t-(1&p)/2),m=d-p;if(3*Math.abs(m)>1){var h=u-f,g=f+(u<f?-1:1)/2,b=p+(d<p?-1:1),y=u-g,v=d-b;h*h+m*m>y*y+v*v&&(f=g+(1&p?1:-1)/2,p=b)}var w=f+"-"+p,x=r[w];x?x.push(c):(a.push(x=r[w]=[c]),x.x=(f+(1&p)/2)*t,x.y=p*o)}return a}function u(e){var t=0,o=0;return B.map((function(n){var r=Math.sin(n)*e,a=-Math.cos(n)*e,i=r-t,l=a-o;return t=r,o=a,[i,l]}))}return c.hexagon=function(t){return"m"+u(null==t?e:+t).join("l")+"z"},c.centers=function(){for(var l=[],s=Math.round(r/o),c=Math.round(n/t),u=s*o;u<i+e;u+=o,++s)for(var d=c*t+(1&s)*t/2;d<a+t/2;d+=t)l.push([d,u]);return l},c.mesh=function(){var t=u(e).slice(0,4).join("l");return c.centers().map((function(e){return"M"+e+"m"+t})).join("")},c.x=function(e){return arguments.length?(l=e,c):l},c.y=function(e){return arguments.length?(s=e,c):s},c.radius=function(n){return arguments.length?(t=2*(e=+n)*Math.sin(I),o=1.5*e,c):e},c.size=function(e){return arguments.length?(n=r=0,a=+e[0],i=+e[1],c):[a-n,i-r]},c.extent=function(e){return arguments.length?(n=+e[0][0],r=+e[0][1],a=+e[1][0],i=+e[1][1],c):[[n,r],[a,i]]},c.radius(1)}().radius(x).extent([[0,0],[t.panelWidth,t.panelHeight]]),{diameterX:C,diameterY:E}=w.getDiameters(),{xoffset:O,yoffset:N}=w.getOffsets(t.globalShape,t.processedData.length),D=C,k=E/2;let F=C*E;C<E&&(F=C*C),E<C&&(F=E*E);const P=(0,H.symbol)().size(F);let R;switch(t.globalShape){case e.HEXAGON_POINTED_TOP:R=S.hexagon(x);break;case e.CIRCLE:R=P.type(H.symbolCircle);break;case e.SQUARE:R=P.type(H.symbolSquare);break;default:R=S.hexagon(x)}const A=e=>({x:T[e][0],y:T[e][1]});let M=t.globalFontSize,z=t.globalFontSize,L=!1,V=t.ellipseCharacters;if(t.globalAutoScaleFonts){const e=go(D,k,t.globalShowValueEnabled,t.processedData);M=e.activeLabelFontSize,z=e.activeValueFontSize,L=e.showEllipses,V=e.numOfChars}const j=ho(t.globalShape,C,E,k,z,M),W=`polystat_${t.panelId}_`+Math.floor(1e4*Math.random()).toString(),X=(e,t)=>{e.preventDefault();let o=[...b];o[t]=!0,y(o)},q=(e,t)=>{e.preventDefault();let o=[...b];o[t]=!1,y(o)},Q=(e,t)=>{e.preventDefault()},Y=(o,n)=>{let r=t.processedData[o].color;t.globalGradientsEnabled&&(r=`url(#${W}_linear_gradient_state_data_${o})`);const a=w.generateRadius(t.globalShape),l=A(o);switch(n){case e.HEXAGON_POINTED_TOP:return c().createElement("path",{ref:i[o],transform:`translate(${l.x}, ${l.y})`,d:R,fill:r,stroke:t.globalPolygonBorderColor,strokeWidth:t.globalPolygonBorderSize+"px",onMouseMove:e=>Q(e),onMouseOver:e=>X(e,o),onMouseOut:e=>q(e,o)});case e.CIRCLE:return c().createElement("circle",{className:"circle",cx:l.x,cy:l.y,r:a,fill:r,onMouseMove:e=>Q(e),onMouseOver:e=>X(e,o),onMouseOut:e=>q(e,o)});case e.SQUARE:return c().createElement("rect",{className:"rect",x:l.x,y:l.y,height:2*a,width:2*a,fill:r,onMouseMove:e=>Q(e),onMouseOver:e=>X(e,o),onMouseOut:e=>q(e,o)});default:return c().createElement("path",{transform:`translate(${l.x}, ${l.y})`,d:R,fill:r,stroke:t.globalPolygonBorderColor,strokeWidth:t.globalPolygonBorderSize+"px",onMouseMove:e=>Q(e),onMouseOver:e=>X(e,o),onMouseOut:e=>q(e,o)})}};return c().createElement("div",{className:o},c().createElement("svg",{className:n,width:t.panelWidth,height:t.panelHeight,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:`${O},${N},${t.panelWidth},${t.panelHeight}`},c().createElement("g",{transform:"translate(0,0)"},c().createElement($,{gradientId:W,data:t.processedData}),t.processedData.map(((e,o)=>{const n=A(o),r=(e=>{let t="_self";return!0===e.newTabEnabled&&(t="_blank"),t})(e),a=e.sanitizeURLEnabled?e.sanitizedURL:e.clickThrough;return c().createElement(c().Fragment,null,a.length>0?c().createElement("a",{target:r,href:a},Y(o,t.globalShape)):Y(o,t.globalShape),t.globalTooltipsEnabled&&c().createElement(co,{data:t.processedData[o],renderTime:t.renderTime,showTime:t.globalTooltipsShowTimestampEnabled,valueEnabled:t.globalShowValueEnabled,visible:b[o],followMouse:!0,reference:i[o],primarySortByField:t.tooltipPrimarySortByField,primarySortDirection:t.tooltipPrimarySortDirection,secondarySortByField:t.tooltipSecondarySortByField,secondarySortDirection:t.tooltipSecondarySortDirection,displayMode:t.tooltipDisplayMode,tooltipDisplayTextTriggeredEmpty:t.tooltipDisplayTextTriggeredEmpty}),c().createElement("text",{className:"toplabel",x:n.x+j.labelTextAlignmentX,y:n.y+j.labelWithValueTextAlignment,textAnchor:"middle",fontFamily:"Roboto",fontSize:M+"px",style:{fill:t.globalTextFontAutoColorEnabled?t.globalTextFontAutoColor:t.globalTextFontColor,pointerEvents:"none"}},e.showName&&((e,t,o,n,r,a,i)=>(""!==i&&(a=i),n?a.substring(0,r)+"...":!e&&t&&a.length>o?a.substring(0,o)+"...":a))(t.globalAutoScaleFonts,t.ellipseEnabled,t.ellipseCharacters,L,V,e.name,e.displayName)),c().createElement("text",{ref:u[o],className:`valueLabel${o}`,x:n.x+j.labelValueAlignmentX,y:n.y+j.valueWithLabelTextAlignment,textAnchor:"middle",fontFamily:"Roboto",fontSize:z+"px",style:{fill:t.globalTextFontAutoColorEnabled?t.globalTextFontAutoColor:t.globalTextFontColor,pointerEvents:"none"}},e.showValue&&(e.isComposite?mo(0,e,t.globalDisplayTextTriggeredEmpty):e.valueFormatted)))})))))},mo=(e,t,o)=>{let n=t.valueFormatted;const r=t.members.length;if(r>0){let a=-1;if(t.displayMode===i[0].value)a=e%r;else{if(void 0===t.triggerCache&&(t.triggerCache=(e=>{let t=[];for(let o=0;o<e.members.length;o++){const n=e.members[o];if(n.thresholdLevel>0){const e={index:o,name:n.name,value:n.value,thresholdLevel:n.thresholdLevel};t.push(e)}}return t=(0,f.orderBy)(t,["thresholdLevel","value","name"],["desc","desc","asc"]),t})(t)),!(t.triggerCache.length>0))return o;{const o=e%t.triggerCache.length;a=t.triggerCache[o].index}}const l=Object.assign({},t.members[a]);n=l.name+": "+l.valueFormatted}return n},ho=(t,o,n,r,a,i)=>{let l=r/2/2+a/2,s=a/2,c=-r/2/2+i/2,u=i/2,d=0,p=0;switch(t){case e.HEXAGON_POINTED_TOP:case e.CIRCLE:u=.37*i;break;case e.SQUARE:l=n/1.5+a/2,s=n/2+.37*i,c=n/4+i/2,u=n/2+.37*i,d=o/2,p=o/2}return{valueWithLabelTextAlignment:l,valueOnlyTextAlignment:s,labelWithValueTextAlignment:c,labelOnlyTextAlignment:u,labelTextAlignmentX:d,labelValueAlignmentX:p}},go=(e,t,o,n)=>{const r=240;let a=!1,i=0,l="";for(let e=0;e<n.length;e++)n[e].name.length>l.length&&(l=n[e].name);let s="";for(let e=0;e<n.length;e++){n[e].valueFormatted.length>s.length&&(s=n[e].valueFormatted);const t=n[e].members.length;if(t>0){let o=0;for(;o<t;){const t=n[e].members[o].displayName+": "+n[e].members[o].valueFormatted;t&&t.length>s.length&&(s=t),o++}}}let c=bo(l,6,r,2,e,t),u=bo(s,6,r,2,e,t);return c<6&&(a=!0,i=18,l=l.substring(0,i+2),c=bo(l,6,r,2,e,t),c<6&&(i=10,l=l.substring(0,i+2),c=bo(l,6,r,2,e,t),c<6&&(i=6,l=l.substring(0,i+2),c=bo(l,6,r,2,e,t)))),o||(u=0),{activeLabelFontSize:c,activeValueFontSize:u,showEllipses:a,numOfChars:i}},bo=(e,t,o,n,r,a)=>function(e,t,o,n,r,a){let i=t.replace("?",a),l=X(e,i);if(l<=(o*=.95)&&a<=n)return a;for(let s=a;s>=r;s--)if(i=t.replace("?",s),l=X(e,i),l<o&&s<=n)return Math.ceil(s);return 0}(e,"?px sans-serif",r,a/n,t,o),yo=e=>x.css`
  font-size: ${e.typography.h1.fontSize};
  text-align: center;
  justify-content: center;
  color: ${e.colors.success.shade};
`,vo=e=>x.css`
  font-size: ${e.typography.h1.fontSize};
  text-align: center;
  justify-content: center;
  color: ${e.colors.error.shade};
`,wo=e=>x.css`
  fill: transparent;
  display: flex;
  align-items: center;
  text-align: center;
  justify-content: center;
`,xo=e=>x.css`
  text-align: center;
  align-items: center;
  justify-content: center;
  fill: transparent;
`;function To(e){for(let o=0;o<e.fields.length;o++)if(e.fields[o].type===t.FieldType.time)return!0;return!1}function So(e,o){let n=[];const r=e.fields.length;for(let o=0;o<r;o++)e.fields[o].type===t.FieldType.string&&n.push(o);let a=function(e,o,n){let r={};for(let a=0;a<o.length;a++){let i=o[a],l=e.fields[i];if(l.type!==t.FieldType.number){let e=Eo(l,n);r[l.name]=e}}return r}(e,n,o);return a}function Co(e,t){const o=(0,f.cloneDeep)(e);return o.labels=t,o}function Eo(e,t){return e.values.toArray()[t]}var Oo=u(545);function No(e,t){let o=e;const n=e.thresholdLevel,r=t.thresholdLevel;if(void 0===n||void 0===r)return o;if(r>n&&(o=t),3===n)switch(r){case 1:case 2:o=t}return o}function Do(e,t,o){let n=o;if(null===t)return{thresholdLevel:3,color:"#808080"};let r=-1;if(void 0===e)return{thresholdLevel:r,color:o};const a=e.length;if(0===a)return{thresholdLevel:r,color:o};const i=e[a-1];if(t>=i.value&&(r=i.state,n=i.color),1===e.length)return{thresholdLevel:r,color:n};for(let o=a-1;o>0;o--){const a=e[o],i=e[o-1];i.value<=t&&t<a.value&&r<i.state&&(r=i.state,n=i.color)}return-1===r&&(r=e[0].state,n=e[0].color),{thresholdLevel:r,color:n}}class ko{static transformSingleMetric(e,t,o){if(isNaN(e))return t;const n=o[e];for(;t.match(this.cellName);)t=t.replace(this.cellName,n.name);for(;t.match(this.cellValue);)t=t.replace(this.cellValue,encodeURIComponent(n.valueFormatted));for(;t.match(this.cellRawValue);)t=t.replace(this.cellRawValue,n.value.toString());return t}static transformNthMetric(e,t){for(;e.match(this.nthCellName);){const o=e.match(this.nthCellName);if(o&&o.length>=2){const n=t[o[1]].name;e=e.replace(this.nthCellName,n)}}for(;e.match(this.nthCellValue);){const o=e.match(this.nthCellValue);if(o&&o.length>=2){const n=t[o[1]].valueFormatted;e=e.replace(this.nthCellValue,encodeURIComponent(n))}}for(;e.match(this.nthCellRawValue);){const o=e.match(this.nthCellRawValue);if(o&&o.length>=2){const n=t[o[1]].value;e=e.replace(this.nthCellRawValue,n.toString())}}return e}static transformComposite(e,t){for(;t.match(this.compositeName);)t=t.replace(this.compositeName,e);return t}static transformByRegex(e,o,n){const r=(0,t.stringToJsRegex)(e),a=o.name.match(r);if(a&&a.length>0&&a.forEach(((e,t)=>{const o=a[t],r=`\${${t}}`,i=`$${t}`;n=(n=n.replace(r,o)).replace(i,o)})),a&&a.groups)for(const e in a.groups){const t=a.groups[e],o=`\${${e}}`,r=`$${e}`;n=(n=n.replace(o,t)).replace(r,t)}return n}}ko.cellName=/\${__cell_name}/,ko.cellValue=/\${__cell}/,ko.cellRawValue=/\${__cell:raw}/,ko.nthCellName=/\${__cell_name_(\d+)}/,ko.nthCellValue=/\${__cell_(\d+)}/,ko.nthCellRawValue=/\${__cell_(\d+):raw}/,ko.compositeName=/\${__composite_name}/;const Fo="##";function Po(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function Ro(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},n=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(o).filter((function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable})))),n.forEach((function(t){Po(e,t,o[t])}))}return e}function Ao(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);o.push.apply(o,n)}return o}(Object(t)).forEach((function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(t,o))})),e}const Mo=e=>"[object Array]"===Object.prototype.toString.call(e)?e.join(Fo):e,zo=(e,o,n)=>{const r=[],a=/\$(\w+)|\[\[([\s\S]+?)(?::(\w+))?\]\]|\${(\w+)(?:\.([^:^\}]+))?(?::(\w+))?}/g;return o.forEach((o=>{if(o.seriesMatch){const i=o.seriesMatch.match(a);i&&i.length>0?i.forEach((a=>{const i=n(a,{compositeName:{text:"compositeName",value:e}},"raw"),l=o.seriesMatch.replace(a,i),s=(0,t.escapeStringForRegex)(i),c=o.seriesMatch.replace(a,s);r.push(Ao(Ro({},o),{seriesName:l,seriesNameEscaped:c}))})):r.push(o)}})),r},Lo=(e,t)=>{const o={};return t.forEach(((e,t)=>{o[t]={text:t,value:e}})),t.groups&&Object.keys(t.groups).forEach((e=>{o[e.replace(/\s+/g,"_")]={text:e,value:t.groups[e]}})),(0,Oo.getTemplateSrv)().replace(e,o)};function Vo(e,t,o,n){switch(o){case"name":return e;case"last_time":return t?t.timestamp:Date.now();default:return n[o]}}var jo,Io;(Io=jo||(jo={}))[Io.ValueToText=1]="ValueToText",Io[Io.RangeToText=2]="RangeToText";const Bo=e=>!(!e||!e.value)&&"null"===e.value.toLowerCase();var Uo,_o,Ho,$o,Go,Wo,Xo;function qo(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function Qo(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},n=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(o).filter((function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable})))),n.forEach((function(t){qo(e,t,o[t])}))}return e}(Ho=Uo||(Uo={})).Absolute="absolute",Ho.Percentage="percentage",function(e){e.Thresholds="thresholds",e.PaletteClassic="palette-classic",e.PaletteSaturated="palette-saturated",e.ContinuousGrYlRd="continuous-GrYlRd",e.Fixed="fixed"}(_o||(_o={})),function(e){e.ValueToText="value",e.RangeToText="range",e.RegexToText="regex",e.SpecialValue="special"}($o||($o={})),(Xo=Go||(Go={})).True="true",Xo.False="false",Xo.Null="null",Xo.NaN="nan",Xo.NullAndNaN="null+nan",Xo.Empty="empty",function(e){e[e.ValueToText=1]="ValueToText",e[e.RangeToText=2]="RangeToText"}(Wo||(Wo={}));const Yo=(e,o)=>{let n=((e,t)=>((e,t)=>{const o=e.reduce(((e,o)=>(o.type===jo.ValueToText?e=((e,t,o)=>{if(void 0===t.value)return e;if(null===o&&Bo(t))return e.concat(t);const n=parseFloat(o),r=parseFloat(t.value);return(isNaN(n)||isNaN(r))&&o===t.value?e.concat(t):n!==r?e:e.concat(t)})(e,o,t):o.type===jo.RangeToText&&(e=((e,t,o)=>{if(void 0===t.from||void 0===t.to||void 0===o)return e;if(null===o&&t.from&&t.to&&"null"===t.from.toLowerCase()&&"null"===t.to.toLowerCase())return e.concat(t);const n=parseFloat(o),r=parseFloat(t.from),a=parseFloat(t.to);return isNaN(n)||isNaN(r)||isNaN(a)?e:n>=r&&n<=a?e.concat(t):e})(e,o,t)),e)),[]);return o.sort(((e,t)=>e.id-t.id)),o})(e,t)[0])(e,o);return void 0===n?function(e,o){for(const n of e)switch(n.type){case $o.ValueToText:if(null==o)continue;const e=n.options[o];if(e)return e;break;case $o.RangeToText:if(null==o)continue;const r=parseFloat(o);if(isNaN(r))continue;if(!isNaN(n.options.from)&&r<n.options.from)continue;if(!isNaN(n.options.to)&&r>n.options.to)continue;return n.options.result;case $o.RegexToText:if(null==o)continue;if("string"!=typeof o)continue;const a=(0,t.stringToJsRegex)(n.options.pattern);if(o.match(a)){const e=Qo({},n.options.result);return null!=e.text&&(e.text=o.replace(a,n.options.result.text||"")),e}case $o.SpecialValue:switch(n.options.match){case Go.Null:if(null==o)return n.options.result;break;case Go.NaN:if(isNaN(o))return n.options.result;break;case Go.NullAndNaN:if(isNaN(o)||null==o)return n.options.result;break;case Go.True:if(!0===o||"true"===o)return n.options.result;break;case Go.False:if(!1===o||"false"===o)return n.options.result;break;case Go.Empty:if(""===o)return n.options.result}}return null}(e,o):n};function Jo(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}const Ko=(e,t)=>{if(null===e)return null;const o=Math.pow(10,t),n=(o*e).toFixed(t);return Math.round(parseFloat(n))/o},Zo=e=>"[object Array]"===Object.prototype.toString.call(e)?e.join(Fo):e,en=e=>{const t=[],o=/\$(\w+)|\[\[([\s\S]+?)(?::(\w+))?\]\]|\${(\w+)(?:\.([^:^\}]+))?(?::(\w+))?}/g;return e.forEach((e=>{if(e.metricName){const n=e.metricName.match(o);n&&n.length>0?n.forEach((o=>{(0,Oo.getTemplateSrv)().replace(o,{},Zo).split(Fo).forEach((n=>{const r=e.metricName.replace(o,n);var a,i;t.push((a=function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},n=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(o).filter((function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable})))),n.forEach((function(t){Jo(e,t,o[t])}))}return e}({},e),i=null!=(i={metricName:r})?i:{},Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(i)):function(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);o.push.apply(o,n)}return o}(Object(i)).forEach((function(e){Object.defineProperty(a,e,Object.getOwnPropertyDescriptor(i,e))})),a))}))})):t.push(e)}})),t},tn=(e,o)=>{const n=en(o);for(let o=0;o<n.length;o++){const r=n[o],a=(0,t.stringToJsRegex)(r.metricName),i=e.match(a);if(i&&i.length>0&&r.enabled)return n[o]}return null};function on(e,o,r,a,l,s,c,u,d,m,h,g,b,y,v,w,x,T){let S=function(e){const o=Date.now(),n=[];for(let r=0;r<e.length;r++){const a=e[r],i=(0,f.cloneDeep)(a);i.fields=[];const l=To(a),s=a.fields.length;for(let e=0;e<s;e++){const o=a.fields[e];if(o.type===t.FieldType.number){const e=o.values.toArray().length;if(l){const e=Object.assign({},o);i.fields.push(e)}else for(let n=0;n<e;n++)if(null!==o.values.toArray()[n]){const e=Co(o,So(a,n)),r=new t.ArrayVector,l=Eo(o,n);r.add(l),e.values=r,i.fields.push(e)}}}if(l)for(let e=0;e<a.fields.length;e++){const o=a.fields[e];o.type!==t.FieldType.number&&i.fields.push(o)}else{const e=new t.ArrayVector;e.add(o);const n={},r={name:"Time",type:t.FieldType.time,values:e,config:n};i.fields.push(r)}n.push(i)}return n}(a.series),C=[];return S.map((e=>{const o=function(e,o){const r=[];for(const o of e.fields)o.type===t.FieldType.number&&r.push(o);const a=[];for(const l of r){const r=(0,t.reduceField)({field:l,reducers:["bogus"]}),s=(0,t.getFieldDisplayName)(l,e),c=Vo(s,null,o,r);let u=4;void 0!==l.config.decimals&&null!==l.config.decimals&&(u=l.config.decimals);const d=(0,t.getValueFormat)(l.config.unit)(c,u,void 0,void 0),p=(0,t.formattedValueToString)(d),f={displayMode:i[0].value,thresholdLevel:0,value:c,valueFormatted:p,valueRounded:cn(c,u)||c,stats:r,name:s,displayName:s,timestamp:0,prefix:"",suffix:"",color:O,clickThrough:"",operatorName:n[0].value,newTabEnabled:!0,sanitizedURL:"",sanitizeURLEnabled:!0,showName:!0,showValue:!0,isComposite:!1,members:[]};a.push(f)}return a}(e,m);for(const e of o)C.push(e)})),C=nn(C,b),C=ln(C,s,w,h,y),C=((e,o,n,r,a,i)=>{const l=(0,p.useTheme2)(),s=(0,p.useTheme)();let c="";if(c=void 0!==l.visualization?l.visualization.getColorByName(r):(0,t.getColorForTheme)(r,s),!e)return o;for(let i=0;i<o.length;i++){const u=tn(o[i].name,e);if(u){const e=o[i];e.operatorName=u.operatorName;const d=Vo(e.name,e,e.operatorName,e.stats),p=Do(u.thresholds&&u.thresholds.length?u.thresholds:a,d,r);let f=p.color;f=void 0!==l.visualization?l.visualization.getColorByName(p.color):(0,t.getColorForTheme)(p.color,s),o[i].value=d,o[i].color=f,o[i].thresholdLevel=p.thresholdLevel;const m=Yo(n.defaults.mappings,o[i].value);if(m&&""!==m.text)if(o[i].valueFormatted=m.text,m.color){let e=l.visualization.getColorByName(m.color);o[i].color=e}else o[i].color=c;else{const e=(0,t.getValueFormat)(u.unitFormat);if(e){const t=+u.decimals,n=e(o[i].value,t,u.scaledDecimals);o[i].valueFormatted=n.text,n.suffix&&(o[i].valueFormatted+=n.suffix),n.prefix&&(o[i].valueFormatted=n.prefix+o[i].valueFormatted),o[i].valueRounded=Ko(o[i].value,t)||o[i].value}}if(""!==u.prefix&&(o[i].valueFormatted=u.prefix+" "+o[i].valueFormatted),""!==u.suffix&&(o[i].valueFormatted=o[i].valueFormatted+" "+u.suffix),""!==u.alias&&(o[i].displayName=u.alias),o[i].prefix=u.prefix,o[i].suffix=u.suffix,u.clickThrough&&u.clickThrough.length>0){const e=(0,t.stringToJsRegex)(u.metricName).exec(o[i].name),n={};e&&e.length>0&&e.forEach(((e,t)=>{n[t]={text:t,value:e}}));let r=(0,Oo.getTemplateSrv)().replace(u.clickThrough,n);r=ko.transformSingleMetric(i,r,o),r=ko.transformNthMetric(r,o),r=ko.transformByRegex(u.metricName,o[i],r),o[i].clickThrough=r,o[i].newTabEnabled=u.clickThroughOpenNewTab,o[i].sanitizeURLEnabled=u.clickThroughSanitize,o[i].sanitizedURL=t.textUtil.sanitize(o[i].clickThrough)}}else if(a&&a.length){const e=Do(a,o[i].value,r);o[i].color=e.color,o[i].thresholdLevel=e.thresholdLevel}}return o})(r,C,s,y,v),e&&(C=((e,o,n)=>{if(!e)return o;const r=[],a=[],i=[],l=((e,t)=>{const o=[];return e.forEach((e=>{const n=t(e.name,void 0,Mo).split(Fo),r=e.name.match(/\$(\w+)|\[\[([\s\S]+?)(?::(\w+))?\]\]|\${(\w+)(?:\.([^:^\}]+))?(?::(\w+))?}/g);r&&r.length>0&&(e.isTemplated=!0),n.forEach((t=>{o.push(Ao(Ro({},e),{name:t,isTemplated:e.isTemplated}))}))})),o})(e,n);for(let e=0;e<l.length;e++){const c=[],u=l[e];if(!u.showComposite)continue;let d=null;const p=zo(u.name,u.metrics,n);for(let e=0;e<p.length;e++){const i=p[e];for(let e=0;e<o.length;e++){if(void 0===i.seriesMatch)continue;let l=i.seriesMatch;void 0!==i.seriesNameEscaped&&(l=i.seriesNameEscaped);const s=(0,t.stringToJsRegex)(l).exec(o[e].name);if(s&&s.length>0){const l=o[e];if(i.alias&&i.alias.length>0&&(l.displayName=Lo(i.alias,s)),c.push(e),u.showMembers?a.push(e):r.push(e),u.clickThrough&&u.clickThrough.length>0){let r=n(u.clickThrough);r=ko.transformComposite(u.name,r),r=ko.transformSingleMetric(e,r,o),r=ko.transformNthMetric(r,o),l.clickThrough=r,l.sanitizedURL=t.textUtil.sanitizeUrl(r)}}}}if(0!==c.length){for(let e=0;e<c.length;e++){const t=o[c[e]];d=null===d?t:No(d,t)}if(null!==d){const e={value:(s=d).value,valueFormatted:s.valueFormatted,valueRounded:s.valueRounded,stats:s.stats,name:s.name,displayName:s.displayName,timestamp:s.timestamp,prefix:s.prefix,suffix:s.suffix,color:s.color,clickThrough:s.clickThrough,operatorName:s.operatorName,newTabEnabled:s.newTabEnabled,sanitizedURL:s.sanitizedURL,sanitizeURLEnabled:s.sanitizeURLEnabled,showName:s.showName,showValue:s.showValue,isComposite:s.isComposite,members:[]};e.name=u.name,e.displayName=u.name;for(let t=0;t<c.length;t++){const n=c[t];e.members.push(Ao(Ro({},o[n]),{name:o[n].displayName||o[n].name}))}e.thresholdLevel=d.thresholdLevel,e.showName=u.showName,e.showValue=u.showValue,e.displayMode=u.displayMode,e.newTabEnabled=u.clickThroughOpenNewTab,e.sanitizeURLEnabled=u.clickThroughSanitize,e.isComposite=!0,i.push(e)}}}var s;Array.prototype.push.apply(o,i);for(let e=0;e<a.length;e++){const t=a[e],o=r.indexOf(t);o>=0&&r.splice(o,1)}r.sort(((e,t)=>t-e));for(let e=o.length;e>=0;e--)(0,f.includes)(r,e)&&o.splice(e,1);return o})(o,C,l)),C=rn(C,c,u,d),C=sn(C,g),C=function(e,t,o){if(0===o)return e;const n=o%2==0;switch(Math.ceil(o/2)){case 1:e=(0,f.sortBy)(e,t);break;case 2:e=(0,f.sortBy)(e,(e=>{if(isNaN(e[t])){const o=e[t].match(/.*?(\d+).*/);return!o||o.length<2?-1:parseInt(o[1],10)}return o=e[t],isNaN(o)?o:Number(o);var o}));break;case 3:e=(0,f.sortBy)(e,(e=>{const o=e[t];return isNaN(o)?(0,f.toLower)(e[t]):o}))}return n&&(e=e.reverse()),e}(C,T,x),C}const nn=(e,o)=>{for(let n=0;n<e.length;n++)if(""!==o){const r=(0,t.stringToJsRegex)(o);if(e[n].name&&r.test(e[n].name.toString())){const t=r.exec(e[n].name.toString());if(!t)continue;let o="";t.length>1&&(t.slice(1).forEach(((e,t)=>{e&&(o+=o.length>0?" "+e.toString():e.toString())})),e[n].displayName=o)}}return e},rn=(e,o,n,r)=>{for(let a=0;a<e.length;a++)0===e[a].clickThrough.length&&(e[a].clickThrough=an(a,o,e),e[a].newTabEnabled=n,e[a].sanitizeURLEnabled=r,e[a].sanitizedURL=t.textUtil.sanitize(e[a].clickThrough));return e},an=(e,t,o)=>{let n=t;return n=ko.transformSingleMetric(e,n,o),n=ko.transformNthMetric(n,o),n=(0,Oo.getTemplateSrv)().replace(n,{}),n},ln=(e,o,n,r,a)=>{const i=(0,p.useTheme2)();let l=i.visualization.getColorByName(a);const s=(0,t.getValueFormat)(n);for(let t=0;t<e.length;t++)if(null!==e[t].value){const n=Yo(o.defaults.mappings,e[t].value);if(n&&""!==n.text)if(e[t].valueFormatted=n.text,n.color){let o=i.visualization.getColorByName(n.color);e[t].color=o}else e[t].color=l;else{if(s){const o=W(e[t].value,r),n=s(e[t].value,o.decimals,o.scaledDecimals);e[t].valueFormatted=n.text,n.suffix&&(e[t].valueFormatted+=` ${n.suffix}`),n.prefix&&(e[t].valueFormatted=`{$formatted.prefix} ${e[t].valueFormatted}`);const a=cn(e[t].value,o.decimals);null!==a&&(e[t].valueRounded=a)}e[t].color=l}}return e},sn=(e,t)=>{const o=[],n=[];if("all"!==t){const t=e.length;for(let r=0;r<t;r++){const t=e[r];t.isComposite&&n.push(t),t.thresholdLevel<1&&o.push(r)}for(let t=e.length;t>=0;t--)(0,f.includes)(o,t)&&e.splice(t,1);0===e.length&&n.length>0&&(e=n)}return e},cn=(e,t)=>{if(null===e)return null;const o=Math.pow(10,t),n=(o*e).toFixed(t);return Math.round(parseFloat(n))/o},un=e=>({wrapper:x.css`
      position: relative;
    `,container:x.css`
      align-items: center;
      justify-content: center;
      display: flex;
      height: 100%;
      width: 100%;
      & svg > g > polygon {
        fill: transparent;
      }
    `}),dn=[{value:"all",label:"Show All"},{value:"triggered",label:"Show Triggered"}];function pn(e,t,o,n,r,a,i){try{var l=e[a](i),s=l.value}catch(e){return void o(e)}l.done?t(s):Promise.resolve(s).then(n,r)}function fn(e){return function(){var t=this,o=arguments;return new Promise((function(n,r){var a=e.apply(t,o);function i(e){pn(a,n,r,i,l,"next",e)}function l(e){pn(a,n,r,i,l,"throw",e)}i(void 0)}))}}const mn=e=>{const[o,n]=(0,s.useState)([]);function r(){return(r=fn((function*(t){if(e.metric.seriesMatch){const t=e.metric.seriesMatch;if("clipboard"in navigator){if(t)return yield navigator.clipboard.writeText(t)}else if(t)return document.execCommand("copy",!0,t)}}))).apply(this,arguments)}return(0,s.useEffect)((()=>{if(e.context.data){const o=e.context.data;let r=[];for(let e=0;e<o.length;e++)for(const n of o[e].fields)n.type===t.FieldType.number&&r.push({label:n.name,value:n.name});n(r)}}),[e.context.data]),c().createElement(p.FieldSet,null,c().createElement(p.HorizontalGroup,null,c().createElement(p.IconButton,{key:"deleteMetric",variant:"destructive",name:"trash-alt",tooltip:"Delete this metric",onClick:()=>e.removeMetric(e.index)}),c().createElement(p.IconButton,{key:"copyMetric",variant:"secondary",name:"copy",tooltip:"Copy Metric/Regex",onClick:()=>function(e){return r.apply(this,arguments)}(e.index)}),c().createElement(p.Field,{label:"Metric/RegEx",style:{minWidth:"175px"},disabled:e.disabled},c().createElement(p.Cascader,{key:`cmi-index-${e.index}`,initialValue:e.metric.seriesMatch,allowCustomValue:!0,placeholder:"",options:o,onSelect:t=>{return o=t,void e.updateMetric(e.index,o);var o}})),c().createElement(p.Field,{label:"Alias",disabled:e.disabled},c().createElement(p.Input,{value:e.metric.alias,placeholder:"",onChange:t=>{return o=t.currentTarget.value,void e.updateMetricAlias(e.index,o);var o}}))))};function hn(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function gn(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},n=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(o).filter((function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable})))),n.forEach((function(t){hn(e,t,o[t])}))}return e}function bn(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);o.push.apply(o,n)}return o}(Object(t)).forEach((function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(t,o))})),e}const yn=e=>{const[t,o]=(0,s.useState)(e.composite),[n,r]=(0,s.useState)((e=>{const t=dn.keys();for(const o of t)if(dn[o].value===e)return dn[o];return dn[0]})(e.composite.displayMode)),a=n=>{o(n),e.setter(t.order,n)},[i]=(0,s.useState)("eye"),[l]=(0,s.useState)("eye-slash"),u=t=>{let o=[...e.composite.metrics];o.splice(t,1),a(bn(gn({},e.composite),{metrics:o}))},d=(t,o)=>{const n=e.composite.metrics;n[t].seriesMatch=o,a(bn(gn({},e.composite),{metrics:n}))},f=(t,o)=>{const n=e.composite.metrics;n[t].alias=o,a(bn(gn({},e.composite),{metrics:n}))};return c().createElement(p.Card,{heading:"",key:`composite-card-${e.ID}`},c().createElement(p.Card.Meta,null,c().createElement(p.FieldSet,null,c().createElement(p.Field,{label:"Composite Name",description:"Name or Regular Expression",disabled:!t.showComposite},c().createElement(p.Input,{value:t.name,placeholder:"",onChange:e=>a(bn(gn({},t),{name:e.currentTarget.value}))})),c().createElement(p.Field,{label:"Show Name",description:"Toggle Display of composite name",disabled:!t.showComposite},c().createElement(p.Switch,{transparent:!0,value:t.showName,disabled:!t.showComposite,onChange:()=>{const e=t.showName;a(bn(gn({},t),{showName:!e}))}})),c().createElement(p.Field,{label:"Show Value",description:"Toggle Display of composite value",disabled:!t.showComposite},c().createElement(p.Switch,{transparent:!0,value:t.showValue,disabled:!t.showComposite,onChange:()=>a(bn(gn({},t),{showValue:!t.showValue}))})),c().createElement(p.Field,{label:"Show Members",description:"Toggle Display of composite members",disabled:!t.showComposite},c().createElement(p.Switch,{transparent:!0,value:t.showMembers,disabled:!t.showComposite,onChange:()=>a(bn(gn({},t),{showMembers:!t.showMembers}))})),c().createElement(p.Field,{label:"Display Mode",description:"All will display all members, Triggered will only display those meeting threshold settings",disabled:!t.showComposite},c().createElement(p.Select,{menuShouldPortal:!0,value:n,onChange:e=>{r(e),a(bn(gn({},t),{displayMode:e.value}))},options:dn})),c().createElement(p.Field,{label:"Clickthrough URL",description:"URL to Open on Click",disabled:!t.showComposite},c().createElement(p.Input,{value:t.clickThrough,placeholder:"https://",onChange:e=>a(bn(gn({},t),{clickThrough:e.currentTarget.value}))})),c().createElement(p.Field,{label:"Sanitize URL",description:"Sanitize URL before evaluating",disabled:!t.showComposite},c().createElement(p.Switch,{transparent:!1,disabled:!t.showComposite,value:t.clickThroughSanitize,onChange:()=>a(bn(gn({},t),{clickThroughSanitize:!t.clickThroughSanitize}))})),c().createElement(p.Field,{label:"Open in New Tab",description:"Open link in new tab",disabled:!t.showComposite},c().createElement(p.Switch,{transparent:!1,value:t.clickThroughOpenNewTab,disabled:!t.showComposite,onChange:()=>a(bn(gn({},t),{clickThroughOpenNewTab:!t.clickThroughOpenNewTab}))})),c().createElement(p.Field,{disabled:!t.showComposite},c().createElement(p.Button,{key:"addMetric",variant:"primary",icon:"plus",disabled:!t.showComposite,onClick:()=>{const e={seriesMatch:"",ID:w(),order:0};if(t.metrics){const o=t.metrics;e.order=o.length,o.push(e),a(bn(gn({},t),{metrics:o}))}else{const o=[];o.push(e),a(bn(gn({},t),{metrics:o}))}}},"Add Metric")),t.metrics&&t.metrics.map(((o,n)=>(o.ID||(o.ID=w()),c().createElement(mn,{key:`composite-metric-id-${o.ID}`,metric:o,index:n,disabled:!t.showComposite,updateMetric:d,updateMetricAlias:f,removeMetric:u,context:e.context})))))),c().createElement(p.Card.Actions,null,c().createElement(p.IconButton,{key:"moveUp",name:"arrow-up",tooltip:"Move Up",onClick:()=>{e.moveUp(t.order)}}),c().createElement(p.IconButton,{key:"moveDown",name:"arrow-down",tooltip:"Move Down",onClick:()=>{e.moveDown(t.order)}}),c().createElement(p.IconButton,{key:"showComposite",name:t.showComposite?i:l,tooltip:"Hide/Show Composite",onClick:()=>a(bn(gn({},t),{showComposite:!t.showComposite}))}),c().createElement(p.IconButton,{key:"copyComposite",name:"copy",tooltip:"Duplicate",onClick:()=>{e.createDuplicate(t.order)}}),c().createElement(p.IconButton,{key:"deleteComposite",variant:"destructive",name:"trash-alt",tooltip:"Delete Composite",onClick:()=>{e.remover(t.order)}})))},vn=({context:e,onChange:t})=>{const[o]=(0,s.useState)(e.options.compositeConfig),[n,r]=(0,s.useState)(e.options.compositeConfig.animationSpeed),[a,i]=(0,s.useState)(e.options.compositeConfig.enabled),[l,u]=(0,s.useState)((()=>{if(!o.composites)return[];const e=[];return o.composites.forEach(((t,o)=>{e[o]={composite:t,order:o,ID:w()}})),e})),d=e=>{u(e);const n=[];e.forEach((e=>{n.push(e.composite)}));const r={composites:n,animationSpeed:o.animationSpeed,enabled:o.enabled};t(r)},[f,m]=(0,s.useState)((()=>{if(!l)return[];let e=l.length;const t=[];for(;e--;)t[e]=!1;return t})),h=(e,t,o)=>{if(o>=e.length)for(var n=o-e.length+1;n--;)e.push(void 0);e.splice(o,0,e.splice(t,1)[0])},g=e=>{if(e!==l.length-1){h(l,e,e+1);for(let e=0;e<l.length;e++)l[e].order=e,l[e].composite.order=e;d([...l])}},b=e=>{if(e>0){h(l,e,e-1);for(let e=0;e<l.length;e++)l[e].order=e,l[e].composite.order=e;d([...l])}},y=e=>{const t=l[e].composite,o=l.length,n={composite:{name:`${t.name} Copy`,label:`${t.name} Copy`,order:o,isTemplated:t.isTemplated,displayMode:t.displayMode,enabled:t.enabled,showName:t.showName,showValue:t.showValue,showComposite:t.showComposite,showMembers:t.showMembers,metrics:t.metrics,clickThrough:t.clickThrough,clickThroughOpenNewTab:t.clickThroughOpenNewTab,clickThroughSanitize:t.clickThroughSanitize},order:o,ID:w()};d([...l,n]),m([...f,!0])},v=(e,t)=>{l[e].composite=t,d([...l])},x=e=>{const t=[...l];let o=0;for(let n=0;n<t.length;n++)if(t[n].order===e){o=n;break}t.splice(o,1);for(let e=0;e<t.length;e++)t[e].order=e;d([...t])};return c().createElement(c().Fragment,null,c().createElement(p.FieldSet,null,c().createElement(p.Field,{label:"Enable Composites",description:"Enable/Disable Composites Globally"},c().createElement(p.Switch,{transparent:!0,value:a,onChange:()=>{return i(e=!a),o.enabled=e,void t(o);var e}})),c().createElement(p.Field,{label:"Animation Speed (ms)",description:"Animation Speed in milliseconds",disabled:!o.enabled},c().createElement(p.Input,{value:n,placeholder:"500",onChange:e=>{return n=e.currentTarget.value,r(n),o.animationSpeed=n,void t(o);var n}}))),c().createElement(p.Button,{fill:"solid",variant:"primary",icon:"plus",disabled:!o.enabled,onClick:()=>{const e=l.length,t={composite:{name:`Composite-${e}`,label:`Composite-${e}`,showName:!0,showValue:!0,showMembers:!1,showComposite:!0,isTemplated:!1,enabled:!0,metrics:[],displayMode:dn[0].value,clickThrough:"",clickThroughOpenNewTab:!0,clickThroughSanitize:!0,order:e},order:e,ID:w()};d([...l,t]),m([...f,!0])}},"Add Composite"),l&&l.map(((t,o)=>c().createElement(p.Collapse,{key:`collapse-item-index-${t.ID}`,label:t.composite.name,isOpen:f[o],onToggle:()=>(e=>{const t=[...f];t[e]=!t[e],m([...t])})(o),collapsible:!0},c().createElement(yn,{key:`composite-item-index-${t.ID}`,ID:t.ID,composite:t.composite,enabled:t.composite.enabled,setter:v,remover:x,moveUp:b,moveDown:g,createDuplicate:y,context:e})))))},wn=({context:e,onChange:t})=>{const[o,n]=(0,s.useState)(e.options.globalThresholdsConfig);return c().createElement(c().Fragment,null,c().createElement(p.Field,null,c().createElement(A,{thresholds:o,setter:e=>{n(e),t(e)}})))},xn=e=>{switch(e){case"avg":return"mean";case"current":return"last";case"time_step":return"step";case"total":return"sum";default:return e}},Tn=new t.PanelPlugin((({options:e,data:t,id:o,width:n,height:r,replaceVariables:a,fieldConfig:i})=>{const l=(0,p.useStyles2)(un),s=on(e.compositeConfig.enabled,e.compositeConfig.composites,e.overrideConfig.overrides,t,a,i,e.globalClickthrough,e.globalClickthroughNewTabEnabled,e.globalClickthroughSanitizedEnabled,e.globalOperator,e.globalDecimals,e.globalDisplayMode,e.globalRegexPattern,e.globalFillColor,e.globalThresholdsConfig,e.globalUnitFormat,e.sortByDirection,e.sortByField),u=(0,p.useTheme2)();let d="#000000";e.globalTextFontAutoColorEnabled&&(d=u.colors.text.primary);const f=new Date;return c().createElement("div",{className:(0,x.cx)(l.wrapper,x.css`
          width: ${n}px;
          height: ${r}px;
        `)},c().createElement("div",{className:(0,x.cx)(l.container)},c().createElement(fo,{compositeConfig:e.compositeConfig,overrideConfig:e.overrideConfig,autoSizePolygons:e.autoSizePolygons,globalAutoScaleFonts:e.globalAutoScaleFonts,globalClickthrough:e.globalClickthrough,globalClickthroughNewTabEnabled:e.globalClickthroughNewTabEnabled,globalClickthroughSanitizedEnabled:e.globalClickthroughSanitizedEnabled,globalOperator:e.globalOperator,globalDecimals:e.globalDecimals,globalDisplayMode:e.globalDisplayMode,globalDisplayTextTriggeredEmpty:e.globalDisplayTextTriggeredEmpty,globalFontSize:e.globalFontSize,globalPolygonSize:e.globalPolygonSize,ellipseCharacters:e.ellipseCharacters,ellipseEnabled:e.ellipseEnabled,globalFillColor:e.globalFillColor,globalRegexPattern:e.globalRegexPattern,globalGradientsEnabled:e.globalGradientsEnabled,globalTextFontAutoColor:d,globalTextFontAutoColorEnabled:e.globalTextFontAutoColorEnabled,globalTextFontColor:e.globalTextFontColor,globalThresholdsConfig:e.globalThresholdsConfig,globalTooltipsEnabled:e.globalTooltipsEnabled,globalTooltipsShowTimestampEnabled:e.globalTooltipsShowTimestampEnabled,globalUnitFormat:e.globalUnitFormat,autoSizeColumns:e.autoSizeColumns,autoSizeRows:e.autoSizeRows,layoutDisplayLimit:e.layoutDisplayLimit,layoutNumColumns:e.layoutNumColumns,layoutNumRows:e.layoutNumRows,processedData:s,panelId:o,panelWidth:n,panelHeight:r,radius:e.radius,renderTime:f,globalShape:e.globalShape,sortByDirection:e.sortByDirection,sortByField:e.sortByField,globalPolygonBorderColor:e.globalPolygonBorderColor,globalPolygonBorderSize:e.globalPolygonBorderSize,globalShowValueEnabled:e.globalShowValueEnabled,tooltipPrimarySortDirection:e.tooltipPrimarySortDirection,tooltipPrimarySortByField:e.tooltipPrimarySortByField,tooltipSecondarySortDirection:e.tooltipSecondarySortDirection,tooltipSecondarySortByField:e.tooltipSecondarySortByField,tooltipDisplayMode:e.tooltipDisplayMode,tooltipDisplayTextTriggeredEmpty:e.tooltipDisplayTextTriggeredEmpty})))})).setMigrationHandler((o=>{if(!o.options)return{};const n=(t=>{let o={autoSizeColumns:!0,autoSizeRows:!0,autoSizePolygons:!0,ellipseCharacters:18,ellipseEnabled:!1,globalAutoScaleFonts:!0,globalClickthrough:"",globalClickthroughNewTabEnabled:!1,globalClickthroughSanitizedEnabled:!1,globalDecimals:2,globalDisplayMode:"all",globalDisplayTextTriggeredEmpty:"",globalFillColor:"",globalFontSize:8,globalGradientsEnabled:!1,globalOperator:"mean",globalPolygonBorderSize:1,globalPolygonBorderColor:"",globalPolygonSize:50,globalRegexPattern:"",globalShape:e.HEXAGON_POINTED_TOP,globalShowValueEnabled:!0,globalTextFontColor:"#000000",globalTextFontAutoColor:"#000000",globalTextFontAutoColorEnabled:!1,globalThresholdsConfig:[],globalTooltipsEnabled:!0,globalTooltipsShowTimestampEnabled:!0,globalUnitFormat:"",layoutDisplayLimit:100,layoutNumColumns:8,layoutNumRows:8,panelHeight:void 0,panelWidth:void 0,panelId:0,radius:100,renderTime:void 0,sortByField:"",sortByDirection:0,overrideConfig:{overrides:[]},compositeConfig:{animationSpeed:"",composites:[],enabled:!1},tooltipPrimarySortDirection:0,tooltipPrimarySortByField:"",tooltipSecondarySortDirection:0,tooltipSecondarySortByField:"",tooltipDisplayMode:"all",tooltipDisplayTextTriggeredEmpty:""};if(t.animationSpeed&&(o.compositeConfig.animationSpeed=t.animationSpeed.toString()),t.columnAutoSize&&(o.autoSizeColumns=t.columnAutoSize),t.columns){let e=parseInt(t.columns,10);(isNaN(e)||e<1)&&(e=8),o.layoutNumColumns=e}if(t.defaultClickThrough&&(o.globalClickthrough=t.defaultClickThrough),t.defaultClickThroughNewTab&&(o.globalClickthroughNewTabEnabled=t.defaultClickThroughNewTab),t.defaultClickThroughSanitize&&(o.globalClickthroughSanitizedEnabled=t.defaultClickThroughSanitize),t.displayLimit&&(o.layoutDisplayLimit=t.displayLimit),t.ellipseCharacters&&(o.ellipseCharacters=t.ellipseCharacters),t.ellipseEnabled&&(o.ellipseEnabled=t.ellipseEnabled),t.fontAutoColor&&(o.globalTextFontAutoColorEnabled=t.fontAutoColor),t.fontAutoScale&&(o.globalAutoScaleFonts=t.fontAutoScale),t.fontSize&&(o.globalFontSize=t.fontSize),t.globalDecimals&&(o.globalDecimals=t.globalDecimals),t.globalDisplayMode&&(o.globalDisplayMode=t.globalDisplayMode),t.globalDisplayTextTriggeredEmpty&&(o.globalDisplayTextTriggeredEmpty=t.globalDisplayTextTriggeredEmpty),t.globalOperatorName&&(o.globalOperator=xn(t.globalOperatorName)),t.globalThresholds){o.globalThresholdsConfig=[];for(const e of t.globalThresholds){const t={value:e.value,state:e.state,color:e.color};o.globalThresholdsConfig.push(t)}}if(t.globalUnitFormat&&(o.globalUnitFormat=t.globalUnitFormat),t.gradientEnabled&&(o.globalGradientsEnabled=t.gradientEnabled),t.hexagonSortByDirection&&(o.sortByDirection=t.hexagonSortByDirection),t.hexagonSortByField&&(o.sortByField=t.hexagonSortByField),t.polygonBorderColor&&(o.globalPolygonBorderColor=t.polygonBorderColor),t.polygonBorderSize&&(o.globalPolygonBorderSize=t.polygonBorderSize),t.polygonGlobalFillColor&&(o.globalFillColor=t.polygonGlobalFillColor),t.radius){let e=parseFloat(t.radius);(isNaN(e)||e<0)&&(e=0),o.radius=e}if(t.radiusAutoSize&&(o.autoSizePolygons=t.radiusAutoSize),t.regexPattern&&(o.globalRegexPattern=t.regexPattern),t.rowAutoSize&&(o.autoSizeRows=t.rowAutoSize),t.rows){let e=parseInt(t.rows,10);(isNaN(e)||e<1)&&(e=8),o.layoutNumRows=e}if(t.shape)switch(t.shape){case"circle":o.globalShape=e.CIRCLE;break;case"square":o.globalShape=e.SQUARE;break;default:o.globalShape=e.HEXAGON_POINTED_TOP}return t.tooltipDisplayMode&&(o.tooltipDisplayMode=t.tooltipDisplayMode),t.tooltipDisplayTextTriggeredEmpty&&(o.tooltipDisplayTextTriggeredEmpty=t.tooltipDisplayTextTriggeredEmpty),t.tooltipEnabled&&(o.globalTooltipsEnabled=t.tooltipEnabled),t.tooltipPrimarySortDirection&&(o.tooltipPrimarySortDirection=t.tooltipPrimarySortDirection),t.tooltipPrimarySortField&&(o.tooltipPrimarySortByField=t.tooltipPrimarySortField),t.tooltipSecondarySortDirection&&(o.tooltipSecondarySortDirection=t.tooltipSecondarySortDirection),t.tooltipSecondarySortField&&(o.tooltipSecondarySortByField=t.tooltipSecondarySortField),t.tooltipTimestampEnabled&&(o.globalTooltipsShowTimestampEnabled=t.tooltipTimestampEnabled),t.valueEnabled&&(o.globalShowValueEnabled=t.valueEnabled),o})(o.polystat);let r=n;delete o.polystat;const a=(e=>{var t;let o={overrideConfig:{overrides:[]}};if(null===(t=e.savedOverrides)||void 0===t?void 0:t.length){let t=0;for(const n of e.savedOverrides){let e={label:"",metricName:"",alias:"",thresholds:[],colors:[],unitFormat:"",decimals:"",scaledDecimals:0,enabled:!0,operatorName:"avg",prefix:"",suffix:"",clickThrough:"",clickThroughSanitize:!0,clickThroughOpenNewTab:!0,order:t};for(const t of Object.keys(n)){const o=n[t];switch(t){case"$$hashKey":break;case"clickThrough":e.clickThrough=o;break;case"colors":e.colors=o;break;case"decimals":e.decimals=o;break;case"enabled":e.enabled=o;break;case"label":e.label=o;break;case"metricName":e.metricName=o;break;case"newTabEnabled":e.clickThroughOpenNewTab=o;break;case"operatorName":e.operatorName=xn(o);break;case"prefix":e.prefix=o;break;case"sanitizeURLEnabled":e.clickThroughSanitize=o;break;case"suffix":e.suffix=o;break;case"thresholds":e.thresholds=[];for(const t of o){const o={value:t.value,state:t.state,color:t.color};e.thresholds.push(o)}break;case"unitFormat":e.unitFormat=o;break;default:console.log("Ignore override migration:",t,o)}}o.overrideConfig.overrides.push(e),t++}}return o})(o),l=((e,t)=>{var o;let n={};if(n.compositeConfig={composites:[],enabled:!0,animationSpeed:t},null===(o=e.savedComposites)||void 0===o?void 0:o.length){let t=0;for(const o of e.savedComposites){let e={name:`COMPOSITE-${t}`,label:`COMPOSITE-${t}`,order:t,isTemplated:!1,displayMode:i[0].value,enabled:!0,showName:!0,showValue:!0,showComposite:!0,showMembers:!1,metrics:[],clickThrough:"",clickThroughSanitize:!0,clickThroughOpenNewTab:!0};t++;for(const t of Object.keys(o)){const n=o[t];switch(t){case"$$hashKey":case"displayName":case"sanitizedURL":break;case"animateMode":"all"!==n&&(e.displayMode=i[1].value);break;case"clickThrough":e.clickThrough=n;break;case"compositeName":e.name=n;break;case"enabled":e.showComposite=n;break;case"hideMembers":e.showMembers=!n;break;case"label":e.label=n;break;case"members":let o=0,r=[];for(const e of Object.keys(n)){let t={seriesMatch:n[e].seriesName,order:o};r.push(t),o++}e.metrics=r;break;case"newTabEnabled":e.clickThroughOpenNewTab=n;break;case"sanitizeURLEnabled":e.clickThroughSanitize=n;break;case"showName":e.showName=n;break;case"showValue":e.showValue=n;break;default:console.log("Ignore composite migration:",t,n)}}n.compositeConfig.composites.push(e)}}return n})(o,n.compositeConfig.animationSpeed);r.compositeConfig=l.compositeConfig,r.overrideConfig=a.overrideConfig;const s=(e=>{e.mappingType=1;let o=[];void 0!==e.valueMaps&&(o=(0,t.convertOldAngularValueMappings)(e)),e.mappingType=2;let n=[];void 0!==e.rangeMaps&&(n=(0,t.convertOldAngularValueMappings)(e));const r=o.concat(n);return[...new Map(r.map((e=>[JSON.stringify(e),e]))).values()]})(o);return o.fieldConfig={defaults:{mappings:s},overrides:[]},delete o.mappingType,delete o.rangeMaps,delete o.valueMaps,delete o.savedComposites,delete o.savedOverrides,delete o.colors,Object.keys(o).forEach((e=>void 0===o[e]?delete o[e]:{})),Object.keys(r).forEach((e=>void 0===r[e]?delete r[e]:{})),r})).useFieldConfig({disableStandardOptions:[t.FieldConfigProperty.Thresholds,t.FieldConfigProperty.Color,t.FieldConfigProperty.Decimals,t.FieldConfigProperty.DisplayName,t.FieldConfigProperty.Max,t.FieldConfigProperty.Min,t.FieldConfigProperty.Links,t.FieldConfigProperty.NoValue,t.FieldConfigProperty.Unit],standardOptions:{[t.FieldConfigProperty.Mappings]:{}}}).setPanelOptions((e=>{e.addBooleanSwitch({name:"Auto Size Columns",path:"autoSizeColumns",defaultValue:!0,category:["Layout"],description:"Automatically set columns based on panel size"}).addNumberInput({path:"layoutNumColumns",name:"Columns",description:"Use specific number of columns",defaultValue:8,settings:{placeHolder:"8",min:1,integer:!0},category:["Layout"],showIf:e=>!0!==e.autoSizeColumns}).addBooleanSwitch({name:"Auto Size Rows",path:"autoSizeRows",defaultValue:!0,category:["Layout"],description:"Automatically set rows based on panel size"}).addNumberInput({path:"layoutNumRows",name:"Rows",description:"Use specific number of rows",defaultValue:8,settings:{placeHolder:"8",min:1,integer:!0},category:["Layout"],showIf:e=>!0!==e.autoSizeRows}).addNumberInput({path:"layoutDisplayLimit",name:"Display Limit",description:"Maximum number of polygons to display",defaultValue:100,settings:{min:1,integer:!0},category:["Layout"]}).addBooleanSwitch({name:"Auto Size Polygons",path:"autoSizePolygons",defaultValue:!0,category:["Sizing"],description:"Automatically sets size of polygon for best fit"}).addNumberInput({name:"Polygon Size in pixels",path:"globalPolygonSize",description:"Use specific size for polygons",defaultValue:25,settings:{placeHolder:"Auto",min:1},category:["Sizing"],showIf:e=>!0!==e.autoSizePolygons}).addNumberInput({name:"Border Size",path:"globalPolygonBorderSize",description:"Border size for each polygon",defaultValue:2,settings:{min:0},category:["Sizing"]}).addBooleanSwitch({name:"Auto Scale Fonts",path:"globalAutoScaleFonts",defaultValue:!0,category:["Text"],description:"Automatically sets label and value font size based on size of polygon"}).addNumberInput({name:"Font Size",path:"globalFontSize",defaultValue:12,settings:{min:0},category:["Text"],description:"Default font size to use when Auto is disabled",showIf:e=>!0!==e.globalAutoScaleFonts}).addBooleanSwitch({name:"Automate Font Color",path:"globalTextFontAutoColorEnabled",defaultValue:!0,category:["Text"],description:"Sets font color to match theme"}).addColorPicker({name:"Font Color",path:"globalTextFontColor",category:["Text"],defaultValue:"#000000",description:"Font color to use for all text on polygon",showIf:e=>!0!==e.globalTextFontAutoColorEnabled}).addBooleanSwitch({name:"Use Ellipses",path:"ellipseEnabled",defaultValue:!1,category:["Text"],description:"Use Ellipses when character count is exceeded",showIf:e=>!0!==e.globalAutoScaleFonts}).addNumberInput({name:"Ellipse Characters",path:"ellipseCharacters",defaultValue:18,settings:{min:0,integer:!0},category:["Text"],description:"Default number of characters to display before showing ellipses",showIf:e=>!0===e.ellipseEnabled&&!0!==e.globalAutoScaleFonts}).addSelect({path:"sortByDirection",name:"Sort By Direction",description:"Direction of sorting by the specified field",category:["Sorting"],defaultValue:1,settings:{options:r}}).addSelect({path:"sortByField",name:"Sort By Field",description:"Which field should be used for sorting",defaultValue:"name",category:["Sorting"],settings:{options:a}}).addBooleanSwitch({name:"Enable Tooltips",path:"globalTooltipsEnabled",defaultValue:!0,category:["Tooltips"],description:"Provides tooltips for each polygon"}).addBooleanSwitch({name:"Show timestamp",path:"globalTooltipsShowTimestampEnabled",defaultValue:!0,category:["Tooltips"],description:"Show timestamp at bottom of tooltip"}).addSelect({path:"tooltipDisplayMode",name:"Display Mode",description:"Show either all metrics/composites or only triggered",defaultValue:"all",category:["Tooltips"],settings:{options:i}}).addTextInput({path:"tooltipDisplayTextTriggeredEmpty",name:"Non Triggered State Text",description:"Text to be displayed by tooltip when there are no triggered thresholds and tooltip display mode is set to triggered",defaultValue:"OK",category:["Tooltips"]}).addSelect({path:"tooltipPrimarySortDirection",name:"Primary Sort Direction",description:"Direction of sorting by the specified field",category:["Tooltips"],defaultValue:r[1].value,settings:{options:r}}).addSelect({path:"tooltipPrimarySortByField",name:"Primary Sort By Field",description:"Which field should be used for sorting",defaultValue:"thresholdLevel",category:["Tooltips"],settings:{options:a}}).addSelect({path:"tooltipSecondarySortDirection",name:"Secondary Sort Direction",description:"Direction of sorting by the specified field",category:["Tooltips"],defaultValue:r[1].value,settings:{options:r}}).addSelect({path:"tooltipSecondarySortByField",name:"Secondary Sort By Field",description:"Which field should be used for sorting",defaultValue:"value",category:["Tooltips"],settings:{options:a}}).addSelect({path:"globalDisplayMode",name:"Display Mode",description:"Show either all metrics/composites or only triggered",defaultValue:"all",category:["Global"],settings:{options:i}}).addTextInput({path:"globalDisplayTextTriggeredEmpty",name:"Non Triggered State Text",description:"Text to be displayed in polygon when there are no triggered thresholds and global display mode is set to triggered",defaultValue:"OK",category:["Global"]}).addBooleanSwitch({name:"Show Value",path:"globalShowValueEnabled",defaultValue:!0,category:["Global"],description:"Show value on the polygon"}).addSelect({name:"Shape",path:"globalShape",description:"Shape of polygon",category:["Global"],defaultValue:o[0].value,settings:{options:o}}).addBooleanSwitch({name:"Use Color Gradients",path:"globalGradientsEnabled",defaultValue:!0,category:["Global"],description:"Applies gradient color effect to all polygons"}).addColorPicker({name:"Global Fill Color",path:"globalFillColor",category:["Global"],defaultValue:O,description:"Color to use when no overrides or thresholds apply to polygon"}).addColorPicker({name:"Global Border Color",path:"globalPolygonBorderColor",category:["Global"],defaultValue:"rgba(0, 0, 0, 0)",description:"Color of polygon border"}).addUnitPicker({name:"Unit",path:"globalUnitFormat",defaultValue:"short",category:["Global"],description:"Use this unit format when it is not specified in overrides or detected in data"}).addSelect({name:"Stat",path:"globalOperator",description:"Statistic to display",category:["Global"],defaultValue:n[0].value,settings:{options:n}}).addNumberInput({name:"Decimals",path:"globalDecimals",description:"Display specified number of decimals",defaultValue:2,settings:{min:0,integer:!0},category:["Global"]}).addCustomEditor({name:"Global Thresholds",id:"globalThresholdsConfig",path:"globalThresholdsConfig",description:"Default thresholds to be applied to all metrics that do not have an override",editor:wn,defaultValue:[],category:["Global"]}).addTextInput({name:"Default Clickthrough",path:"globalClickthrough",description:"URL to use when none are defined by overrides or composites",category:["Global"],defaultValue:""}).addBooleanSwitch({name:"Sanitize",path:"globalClickthroughSanitizedEnabled",defaultValue:!0,category:["Global"],description:"Sanitizes clickthrough url"}).addBooleanSwitch({name:"Open In New Tab",path:"globalClickthroughNewTabEnabled",defaultValue:!0,category:["Global"],description:"Opens clickthrough in a new tab"}).addTextInput({name:"Global Regex",path:"globalRegexPattern",description:"The values in the specified column are filtered and displayed according to this regular expression. Ex: String: Url|broadcom.com|mirror|location-1 regex: /Url&#92;|(.*?)&#92;|/ Output: broadcom.com",category:["Global Aliasing"],defaultValue:""}).addCustomEditor({name:"Overrides",id:"overrideConfig",path:"overrideConfig",description:"Overrides for multiple metrics",editor:j,defaultValue:{overrides:[]},category:["Overrides"]}).addCustomEditor({name:"Composites",id:"compositeConfig",path:"compositeConfig",description:"Composites allow you to roll up multiple metrics into a single polygon",editor:vn,defaultValue:{composites:[],enabled:!0,animationSpeed:"1500"},category:["Composites"]})})).setSuggestionsSupplier(new class{getSuggestionsForData(e){const{dataSummary:t}=e;t.hasData&&t.hasNumberField&&e.getListAppender({name:"Polystat",pluginId:"grafana-polystat-panel",options:{}}).append({name:"Polystat"})}})})(),d})()));
//# sourceMappingURL=module.js.map